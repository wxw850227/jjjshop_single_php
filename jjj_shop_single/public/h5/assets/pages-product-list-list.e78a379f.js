import{_ as t,v as e,x as s,o as a,c as o,w as l,n as i,g as c,b as r,J as _,d,q as p,f as n,r as h,F as u,e as f,I as g,j as y,i as m,k as b,S as w,t as x}from"./index-024cd044.js";import{u as v}from"./uni-load-more.46aeda4b.js";const D=t({components:{uniLoadMore:v},data:()=>({isLieBiao:!0,phoneHeight:0,scrollviewHigh:0,topRefresh:!1,loading:!0,no_more:!1,type_active:0,price_top:!1,listData:[],page:1,category_id:0,search:"",sortType:"",sortPrice:0,list_rows:10,last_page:0}),computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},onLoad(t){this.category_id=t.category_id,t.search&&(this.search=t.search),t.sortType&&(this.sortType=t.sortType),t.sortPrice&&(this.sortPrice=t.sortPrice)},mounted(){this.init(),this.getData()},onPullDownRefresh(){this.restoreData(),this.getData()},methods:{searchFunc(){this.listData=[],this.page=1,this.getData()},init(){let t=this;e({success(e){t.phoneHeight=e.windowHeight,s().select(".top-box").boundingClientRect((e=>{let s=t.phoneHeight-e.height;t.scrollviewHigh=s})).exec()}})},restoreData(){this.listData=[],this.category_id=0,this.search="",this.sortType="",this.sortPrice=0},tabTypeFunc(t){let e=this;e.listData=[],e.page=1,e.no_more=!1,e.loading=!0,2==t?(e.price_top=!this.price_top,1==e.price_top?e.sortPrice=0:e.sortPrice=1,e.sortType="price"):1==t&&(e.price_top=!this.price_top,e.sortType="sales"),e.type_active=t,console.log(e.type_active),e.getData()},getData(){let t=this,e=t.page,s=t.list_rows,a=t.category_id,o=t.search,l=t.sortType,i=t.sortPrice;t.loading=!0,t._get("product.product/lists",{page:e||1,category_id:a,search:o,sortType:l,sortPrice:i,list_rows:s},(function(e){t.loading=!1,t.listData=t.listData.concat(e.data.list.data),t.last_page=e.data.list.last_page,e.data.list.last_page<=1&&(t.no_more=!0)}))},gotoList(t){let e="pages/product/detail/detail?product_id="+t;this.gotoPage(e)},gotoSearch(){this.gotoPage("/pages/product/search/search")},scrolltolowerFunc(){let t=this;if(t.bottomRefresh=!0,t.page++,t.loading=!0,t.page>t.last_page)return t.loading=!1,void(t.no_more=!0);t.getData()},select_type(){this.isLieBiao=!this.isLieBiao},onShareAppMessage(){return{title:"全部分类",path:"/pages/product/category?"+this.getShareUrlParams()}}}},[["render",function(t,e,s,v,D,T){const k=g,P=c,L=y,C=m,F=b("uni-load-more"),B=w;return a(),o(P,{"data-theme":t.theme(),class:i(t.theme()||"")},{default:l((()=>[r(P,{class:"top-box"},{default:l((()=>[r(P,{class:"index-search-box index-search-box_re d-b-c",id:"searchBox"},{default:l((()=>[r(P,{class:"index-search index-search_re t-c flex-1"},{default:l((()=>[_("span",{class:"icon iconfont icon-sousuo"}),r(k,{type:"text","model-value":D.search,class:"flex-1 ml10 f26 gray3","placeholder-class":"f26 gray9",placeholder:"搜索商品","confirm-type":"search",onConfirm:e[0]||(e[0]=t=>T.searchFunc())},null,8,["model-value"])])),_:1})])),_:1}),r(P,{class:"inner-tab"},{default:l((()=>[r(P,{class:i(0==D.type_active?"item active":"item"),onClick:e[1]||(e[1]=t=>T.tabTypeFunc(0))},{default:l((()=>[r(P,{class:"box"},{default:l((()=>[d("综合")])),_:1})])),_:1},8,["class"]),r(P,{class:i(1==D.type_active?"item active":"item"),onClick:e[2]||(e[2]=t=>T.tabTypeFunc(1))},{default:l((()=>[r(P,{class:"box"},{default:l((()=>[d("销量")])),_:1})])),_:1},8,["class"]),r(P,{class:i(2==D.type_active?"item active":"item"),onClick:e[3]||(e[3]=t=>T.tabTypeFunc(2))},{default:l((()=>[r(P,{class:"box"},{default:l((()=>[r(L,null,{default:l((()=>[d("价格")])),_:1}),r(P,{class:"arrows"},{default:l((()=>[r(P,{class:i(D.price_top&&2==D.type_active?"arrow active":"arrow")},{default:l((()=>[_("span",{class:"icon iconfont icon-sanjiao2"})])),_:1},8,["class"]),r(P,{class:i(D.price_top||2!=D.type_active?"arrow":"arrow active")},{default:l((()=>[_("span",{class:"icon iconfont icon-sanjiao1"})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1},8,["class"]),r(P,{class:"item"},{default:l((()=>[r(P,{class:"box",style:{height:"100%"}},{default:l((()=>[r(C,{style:{width:"36rpx",height:"36rpx"},onClick:e[4]||(e[4]=t=>T.select_type()),src:1==D.isLieBiao?"/static/liebiao.png":"/static/tubiao.png"},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1}),r(P,{class:"prodcut-list-wrap"},{default:l((()=>[r(B,{"scroll-y":"true",class:"scroll-Y",style:p("height:"+D.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:T.scrolltolowerFunc},{default:l((()=>[r(P,{class:i(D.topRefresh?"top-refresh open":"top-refresh")},{default:l((()=>[(a(),n(u,null,h(3,((t,e)=>r(P,{class:"circle",key:e}))),64))])),_:1},8,["class"]),1==D.isLieBiao?(a(),o(P,{key:0,class:"shop_body"},{default:l((()=>[(a(!0),n(u,null,h(D.listData,((t,e)=>(a(),o(P,{class:i(["shop_body_l_item",e==D.listData.length-1?"noborder":""]),key:e,onClick:e=>T.gotoList(t.product_id)},{default:l((()=>[r(P,null,{default:l((()=>[r(C,{src:t.product_image,mode:""},null,8,["src"])])),_:2},1024),r(P,{class:"shop_body_l_item_info"},{default:l((()=>[r(P,{class:"shop_body_l_item_info_title gray3 f32"},{default:l((()=>[d(x(t.product_name),1)])),_:2},1024),r(P,{class:"d-b-c pb10"},{default:l((()=>[r(P,{class:"shop_body_l_item_info_price"},{default:l((()=>[r(P,{class:"f24 shop_red"},{default:l((()=>[d("¥"),r(L,{class:"f32 fb"},{default:l((()=>[d(x(t.product_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),r(P,{class:"shop_body_l_item_info_others f22"},{default:l((()=>[r(P,{class:"shop_body_l_item_info_others_sales"},{default:l((()=>[d("累计成交："+x(t.product_sales)+"笔",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})):f("",!0),0==D.isLieBiao?(a(),o(P,{key:1,class:"shop_body2"},{default:l((()=>[(a(!0),n(u,null,h(D.listData,((t,e)=>(a(),o(P,{class:i(["shop_body_t_item",e%2==0?"ml20 mr20":" mr20"]),key:e,onClick:e=>T.gotoList(t.product_id)},{default:l((()=>[r(C,{src:t.product_image,mode:""},null,8,["src"]),r(P,{class:"shop_body_t_item_info"},{default:l((()=>[r(P,{class:"shop_body_t_item_info_title f26"},{default:l((()=>[d(x(t.product_name),1)])),_:2},1024),r(P,{class:"shop_body_t_item_info_others f24 gray9 mt"},{default:l((()=>[r(P,{class:"shop_body_t_item_info_others_sales"},{default:l((()=>[d("累计成交："+x(t.product_sales)+"笔",1)])),_:2},1024)])),_:2},1024),r(P,{class:"shop_body_t_item_info_price"},{default:l((()=>[r(P,{class:"f20 redF6"},{default:l((()=>[d("¥"),r(L,{class:"f32"},{default:l((()=>[d(x(t.product_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})):f("",!0),0!=D.listData.length||D.loading?(a(),o(F,{key:3,loadingType:T.loadingType},null,8,["loadingType"])):(a(),o(P,{key:2,class:"d-c-c p30"},{default:l((()=>[r(L,{class:"iconfont icon-wushuju"}),r(L,{class:"cont"},{default:l((()=>[d("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"])])),_:1})])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-54cb249a"]]);export{D as default};
