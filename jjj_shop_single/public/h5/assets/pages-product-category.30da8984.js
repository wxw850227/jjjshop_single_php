import{_ as t,v as e,x as a,a as s,o as l,c,w as i,n as o,g as n,b as r,J as h,d,t as g,q as u,f as y,r as p,F as _,e as f,j as m,S as x,k,i as w}from"./index-024cd044.js";const C=t({components:{},data:()=>({isloadding:!0,searchName:"搜索商品",show_type:3,phoneHeight:0,scrollviewHigh:0,listData:[],childlist:[],select_index:0,catename:""}),onLoad(){},onShow(){this.getTabBarLinks()},mounted(){this.init(),this.getData()},methods:{init(){let t=this;e({success(e){t.phoneHeight=e.windowHeight,a().select("#searchBox").boundingClientRect((e=>{let a=t.phoneHeight-e.height;t.scrollviewHigh=a})).exec()}})},hasImages:t=>null!=t.images&&null!=t.images.file_path?t.images.file_path:"",getData(){let t=this;t.isloadding=!0,t._get("product.category/index",{},(function(e){t.listData=e.data.list,t.catename=t.listData[0].name,t.show_type=e.data.template.category_style,console.log(t.show_type),t.listData[0].child&&(t.childlist=t.listData[0].child),t.background=e.data.background,t.isloadding=!1}))},selectCategory(t){this.listData[t].child&&(this.childlist=this.listData[t].child,this.select_index=t,this.catename=this.listData[this.select_index].name)},gotoList(t){let e=t;this.gotoPage("/pages/product/list/list?category_id="+e+"&sortType=all&search=&sortPrice=0")},wxGetUserInfo:function(t){if(!t.detail.iv)return s({title:"您取消了授权,登录失败",icon:"none"}),!1},gotoSearch(){this.gotoPage("/pages/product/search/search")},onShareAppMessage(){return{title:this.templet.share_title,path:"/pages/product/category?"+this.getShareUrlParams()}}}},[["render",function(t,e,a,s,C,D){const H=m,b=n,v=w,B=x,I=k("tabBar");return l(),c(b,{class:o(["category-wrap",t.theme()||""]),"data-theme":t.theme()},{default:i((()=>[r(b,{class:"index-search-box-cate d-b-c",id:"searchBox",style:u(0==t.topBarHeight()?"":"height:"+t.topBarHeight()+"px;padding-top:"+t.topBarTop()+"px")},{default:i((()=>[r(b,{class:"index-search-cate flex-1 t-c",onClick:D.gotoSearch},{default:i((()=>[h("span",{class:"icon iconfont icon-sousuo"}),r(H,{class:"ml10"},{default:i((()=>[d(g(C.searchName),1)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["style"]),r(b,{class:"category-content"},{default:i((()=>[10==C.show_type?(l(),c(b,{key:0,class:"cotegory-type cotegory-type-1"},{default:i((()=>[r(B,{"scroll-y":"true",class:"scroll-Y",style:u("height:"+C.scrollviewHigh+"px;")},{default:i((()=>[r(b,{class:"list"},{default:i((()=>[(l(!0),y(_,null,p(C.listData,((t,e)=>(l(),c(b,{class:"item",key:e,onClick:e=>D.gotoList(t.category_id)},{default:i((()=>[r(b,{class:"pic"},{default:i((()=>[r(v,{src:D.hasImages(t),mode:"widthFix"},null,8,["src"])])),_:2},1024),r(b,{class:"p-20-0 fb tc f34"},{default:i((()=>[d(g(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})):f("",!0),20==C.show_type?(l(),c(b,{key:1,class:"cotegory-type cotegory-type-2"},{default:i((()=>[r(B,{"scroll-y":"true",class:"scroll-Y",style:u("height:"+C.scrollviewHigh+"px;")},{default:i((()=>[r(b,{class:"list"},{default:i((()=>[(l(!0),y(_,null,p(C.listData,((t,e)=>(l(),c(b,{class:"item",key:e,onClick:e=>D.gotoList(t.category_id)},{default:i((()=>[r(v,{src:D.hasImages(t),mode:"aspectFit"},null,8,["src"]),r(H,null,{default:i((()=>[d(g(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})):f("",!0),30==C.show_type?(l(),c(b,{key:2,class:"cotegory-type cotegory-type-3"},{default:i((()=>[r(b,{class:"category-tab"},{default:i((()=>[r(B,{"scroll-y":"true",class:"scroll-Y",style:u("height:"+C.scrollviewHigh+"px;")},{default:i((()=>[(l(!0),y(_,null,p(C.listData,((t,e)=>(l(),c(b,{class:o(e==C.select_index?"item active":"item"),key:e,onClick:t=>D.selectCategory(e)},{default:i((()=>[r(H,null,{default:i((()=>[d(g(t.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["style"])])),_:1}),r(b,{class:"category-content pr"},{default:i((()=>[r(B,{"scroll-y":"true",class:"scroll-Y scroll-3",style:u("height:"+C.scrollviewHigh+"px;")},{default:i((()=>[r(b,{class:"f26 catename"},{default:i((()=>[d(g(C.catename),1)])),_:1}),r(b,{class:"list"},{default:i((()=>[(l(!0),y(_,null,p(C.childlist,((t,e)=>(l(),c(b,{class:"item",key:e,onClick:e=>D.gotoList(t.category_id)},{default:i((()=>[r(v,{src:D.hasImages(t),mode:"aspectFit"},null,8,["src"]),r(H,{class:"type-name"},{default:i((()=>[d(g(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})):f("",!0)])),_:1}),r(I)])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-6c1737ea"]]);export{C as default};
