import{_ as t,v as o,y as a,A as l,o as s,c as e,w as i,g as d,b as c,f as r,r as _,F as n,d as p,q as u,j as g,k as h,S as f,t as m,i as y,h as w}from"./index-024cd044.js";import{u as k}from"./uni-load-more.46aeda4b.js";const v=t({components:{uniLoadMore:k},data:()=>({loading:!0,no_more:!1,scrollviewHigh:"",product_list:[],page:1,last_page:"",isfollow:""}),computed:{loadingType(){return this.loading?1:0!=this.product_list.length&&this.no_more?2:0}},onLoad(){this.init(),this.getData()},methods:{init(){let t=this;t.page=1,t.product_list=[],o({success(o){t.scrollviewHigh=o.windowHeight}})},getData(){let t=this;t.loading=!0,t._post("user.Favorite/list",{page:t.page,type:20,list_rows:15},(o=>{t.loading=!1,t.last_page=o.data.list.last_page,t.product_list=t.product_list.concat(o.data.list.data),o.data.list.last_page<=1?t.no_more=!0:t.no_more=!1}))},scrolltolowerFunc(){let t=this;t.no_more||(t.page++,t.page<=t.last_page?t.getData():t.no_more=!0)},goto_product(t){this.gotoPage("pages/product/detail/detail?product_id="+t)},cancelFav(t){let o=this;a({title:"正在取消"}),o._post("user.favorite/fav",{product_id:t},(t=>{l(),o.page=1,o.product_list=[],o.getData()}))}}},[["render",function(t,o,a,l,k,v){const b=y,C=d,F=g,j=w,x=h("uni-load-more"),D=f;return s(),e(C,{class:"shop_body"},{default:i((()=>[c(D,{"scroll-y":"true",style:u("height:"+k.scrollviewHigh+"px;"),class:"scroll-Y","lower-threshold":"50",onScrolltolower:v.scrolltolowerFunc},{default:i((()=>[(s(!0),r(n,null,_(k.product_list,((t,o)=>(s(),e(C,{class:"shop_body_l_item",key:o},{default:i((()=>[c(b,{src:t.product_image,onClick:o=>v.goto_product(t.product_id)},null,8,["src","onClick"]),c(C,{class:"shop_body_l_item_info",onClick:o=>v.goto_product(t.product_id)},{default:i((()=>[c(C,{class:"shop_body_l_item_info_title h1"},{default:i((()=>[p(m(t.product_name),1)])),_:2},1024),c(C,{class:"shop_body_l_item_info_price"},{default:i((()=>[c(C,{class:"h2 red"},{default:i((()=>[p("¥"),c(F,{class:"h1"},{default:i((()=>[p(m(t.product_price),1)])),_:2},1024)])),_:2},1024),c(C,{class:"h4 huaxianjia"},{default:i((()=>[p("¥"),c(F,{class:"h3"},{default:i((()=>[p(m(t.line_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),c(j,{type:"default",onClick:o=>v.cancelFav(t.product_id)},{default:i((()=>[p("取消关注")])),_:2},1032,["onClick"])])),_:2},1024)))),128)),0!=k.product_list.length||k.loading?(s(),e(x,{key:1,loadingType:v.loadingType},null,8,["loadingType"])):(s(),e(C,{key:0,class:"d-c-c p30"},{default:i((()=>[c(F,{class:"iconfont icon-wushuju"}),c(F,{class:"cont"},{default:i((()=>[p("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltolower"])])),_:1})}],["__scopeId","data-v-3531f762"]]);export{v as default};
