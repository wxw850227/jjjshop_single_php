import{_ as e,v as t,y as s,A as a,a as o,o as l,c as i,w as c,b as u,d,u as r,f as n,r as p,F as _,e as f,t as m,q as h,n as A,g,j as k,S as y,i as b,h as v,I as w,k as x,D as C,R as H,x as P,K as S,T as I,U as M,V as F,M as X,W as D,X as N,Y as V}from"./index-024cd044.js";import{_ as K}from"./share.0e953495.js";import{P as T}from"./uni-popup.95b83736.js";/* empty css                                                                  */const E=e({data:()=>({phoneHeight:0,scrollviewHigh:0,Visible:!1,datalist:{},ratio:1}),props:["isCoupon","couponList","discount"],onLoad(){},mounted(){this.init()},watch:{isCoupon:function(e,t){e!=t&&(this.Visible=e,this.datalist=this.couponList,this.getHeight())}},methods:{init(){let e=this;t({success(t){e.phoneHeight=t.windowHeight,e.ratio=t.windowWidth/750,e.getHeight()}})},getHeight(){let e=Object.keys(this.couponList).length;e>2?this.scrollviewHigh=.5*this.phoneHeight:1==e?this.scrollviewHigh=250*this.ratio+60:2==e&&(this.scrollviewHigh=460*this.ratio+60)},selectCoupon(e,t){let l=this;s({title:"领取中"}),l._post("user.coupon/receive",{coupon_id:e.coupon_id},(function(e){a(),o({title:"领取成功",duration:2e3,icon:"success"}),l.datalist[t].is_receive=!0}))},closePopup(){this.$emit("close")}}},[["render",function(e,t,s,a,o,b){const v=g,w=k,x=y;return l(),i(v,{class:A(o.Visible?"usable-coupon open":"usable-coupon close")},{default:c((()=>[u(v,{class:"popup-bg",onClick:b.closePopup},null,8,["onClick"]),u(v,{class:"main",onClick:t[0]||(t[0]=r((()=>{}),["stop"]))},{default:c((()=>[u(v,{class:"pop-title"},{default:c((()=>[u(v,null,{default:c((()=>[d("优惠")])),_:1}),u(v,{class:"pop-close",onClick:r(b.closePopup,["stop"])},{default:c((()=>[u(w,{class:"icon iconfont icon-guanbi"})])),_:1},8,["onClick"])])),_:1}),u(v,{class:"p-0-20"},{default:c((()=>[s.discount.product_reduce&&s.discount.product_reduce.length>0?(l(),i(v,{key:0,class:""},{default:c((()=>[u(v,{class:"f22 gray3 line-h-50 p-20-0"},{default:c((()=>[u(w,{class:"text-box"},{default:c((()=>[d("满减")])),_:1}),(l(!0),n(_,null,p(s.discount.product_reduce,((e,t)=>(l(),i(w,{key:t,label:e,value:t},{default:c((()=>[1==e.full_type?(l(),i(w,{key:0,class:"ml20"},{default:c((()=>[d("满"+m(e.full_value)+"元",1)])),_:2},1024)):f("",!0),2==e.full_type?(l(),i(w,{key:1,class:"ml20"},{default:c((()=>[d("满"+m(e.full_value)+"件",1)])),_:2},1024)):f("",!0),1==e.reduce_type?(l(),i(w,{key:2},{default:c((()=>[d("减"+m(e.reduce_value)+"元",1)])),_:2},1024)):f("",!0),2==e.reduce_type?(l(),i(w,{key:3},{default:c((()=>[d(m((100-e.reduce_value)/10)+"折",1)])),_:2},1024)):f("",!0)])),_:2},1032,["label","value"])))),128))])),_:1})])),_:1})):f("",!0),s.discount.give_points>0?(l(),i(v,{key:1,class:"p-20-0 line-h-50 f22 gray3"},{default:c((()=>[u(w,{class:"text-box"},{default:c((()=>[d("返"+m(e.points_name()),1)])),_:1}),d("商城购物返"+m(e.points_name())+"，订单完成后最高返"+m(s.discount.give_points)+m(e.points_name()),1)])),_:1})):f("",!0)])),_:1}),u(x,{"scroll-y":"true",class:"scroll-Y scroll-coupon",style:h("height:"+o.scrollviewHigh+"px;")},{default:c((()=>[u(v,null,{default:c((()=>[u(v,{class:"scroll-coupon-tit"},{default:c((()=>[d("可领取优惠券")])),_:1}),(l(!0),n(_,null,p(o.datalist,((t,s)=>(l(),i(v,{key:s,class:"mb20"},{default:c((()=>[u(v,{class:A(t.is_get?"coupon-item coupon-item-gray":"coupon-item coupon-item-"+t.color.text)},{default:c((()=>[u(v,{class:"circles"},{default:c((()=>[(l(),n(_,null,p(6,((e,t)=>u(w,{key:t}))),64))])),_:1}),u(v,{class:"info w100"},{default:c((()=>[u(v,{class:"d-c-c d-c"},{default:c((()=>[u(w,{class:"f40 fb w-s-n"},{default:c((()=>[d(m(t.coupon_type.text),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(v,{class:"operation d-b-c w-b"},{default:c((()=>[u(v,{class:"flex-1 o-h"},{default:c((()=>[10==t.coupon_type.value?(l(),i(v,{key:0,class:"f34"},{default:c((()=>[u(w,{class:"f34 fb"},{default:c((()=>[d("减"+m(1*t.reduce_price)+"元",1)])),_:2},1024)])),_:2},1024)):f("",!0),20==t.coupon_type.value?(l(),n(_,{key:1},[u(w,{class:"f34 fb"},{default:c((()=>[d(m(t.discount),1)])),_:2},1024),u(w,null,{default:c((()=>[d("折券")])),_:1})],64)):f("",!0),u(v,{class:"f24"},{default:c((()=>[d(m(t.min_price>0?"满"+1*t.min_price+"元可用":"无门槛"),1)])),_:2},1024),10==t.expire_type?(l(),i(v,{key:2,class:"mt30 f24"},{default:c((()=>[d("领取"+m(t.expire_day)+"天内有效",1)])),_:2},1024)):f("",!0),20==t.expire_type?(l(),i(v,{key:3,class:"mt30 f24 white"},{default:c((()=>[d(m(t.start_time.text)+"~"+m(t.end_time.text),1)])),_:2},1024)):f("",!0)])),_:2},1024),t.is_receive?(l(),i(v,{key:1,class:"f30 mr20 b-radio"},{default:c((()=>[u(w,null,{default:c((()=>[d("已领取")])),_:1})])),_:1})):(l(),i(v,{key:0,class:"f30 mr20 b-radio",onClick:e=>b.selectCoupon(t,s)},{default:c((()=>[d(" 立即领取 ")])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1032,["class"]),20==t.apply_range?(l(),i(v,{key:0,class:"range_item d-b-c",onClick:r((s=>e.gotoPage("/pages/coupon/detail?coupon_id="+t.coupon_id)),["stop"])},{default:c((()=>[u(v,null,{default:c((()=>[d("限购店铺部分商品")])),_:1}),u(v,null,{default:c((()=>[u(w,{class:"icon iconfont icon-jiantou",style:{color:"#999999","font-size":"24rpx"}})])),_:1})])),_:2},1032,["onClick"])):f("",!0)])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"])])),_:1})])),_:1},8,["class"])}],["__scopeId","data-v-1b82bdb7"]]);const Q=e({data:()=>({Visible:!1,poster_img:"",wechat_share:!1}),props:["isbottmpanel","product_id"],watch:{isbottmpanel:function(e,t){e!=t&&(this.wechat_share=!1,this.Visible=e)}},methods:{closePopup(e){this.$emit("close",{type:e,poster_img:this.poster_img})},share:function(){this.wechat_share=!0},genePoster:function(){let e=this;s({title:"加载中"});let t="wx";t="mp",e._get("product.product/poster",{product_id:e.product_id,source:"mp"},(t=>{e.poster_img=t.data.qrcode,e.closePopup(2)}),null,(()=>{a()}))}}},[["render",function(e,t,s,a,o,n){const p=b,_=g,m=k,h=v;return l(),i(_,{class:A(["bottom-panel",o.Visible?"bottom-panel open":"bottom-panel close"]),onClick:n.closePopup},{default:c((()=>[u(_,{class:"popup-bg"},{default:c((()=>[o.wechat_share?(l(),i(_,{key:0,class:"wechat-box"},{default:c((()=>[u(p,{src:K,mode:"widthFix"})])),_:1})):f("",!0)])),_:1}),u(_,{class:"content",onClick:t[1]||(t[1]=r((()=>{}),["stop"]))},{default:c((()=>[u(_,{class:"module-box module-share"},{default:c((()=>[u(_,{class:"hd d-c-c"},{default:c((()=>[d(" 分享 ")])),_:1}),u(_,{class:"p30 box-s-b"},{default:c((()=>[u(_,{class:"d-c-c"},{default:c((()=>[u(_,{class:"item flex-1 d-c-c d-c"},{default:c((()=>[u(h,{"open-type":"share",onClick:n.share},{default:c((()=>[u(_,{class:"icon-box d-c-c share-friend"},{default:c((()=>[u(m,{class:"iconfont icon-fenxiang"})])),_:1}),u(m,{class:"pt20"},{default:c((()=>[d("分享好友")])),_:1})])),_:1},8,["onClick"])])),_:1}),u(_,{class:"item flex-1 d-c-c d-c"},{default:c((()=>[u(h,{onClick:n.genePoster},{default:c((()=>[u(_,{class:"icon-box d-c-c"},{default:c((()=>[u(m,{class:"iconfont icon-edit"})])),_:1}),u(m,{class:"pt20"},{default:c((()=>[d("生成海报")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),u(_,{class:"btns"},{default:c((()=>[u(h,{type:"default",onClick:t[0]||(t[0]=e=>n.closePopup(1))},{default:c((()=>[d("取消")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["class","onClick"])}],["__scopeId","data-v-71044073"]]);const U=e({components:{spec:e({data:()=>({Visible:!1,form:{detail:{},show_sku:{sku_image:""}},stock:0,selectSpec:"",isOpenSpec:!1,type:"",clock:!1}),props:["isPopup","productModel"],onLoad(){},mounted(){},computed:{isadd:function(){return this.form.show_sku.sum>=this.stock||this.form.show_sku.sum>=this.form.detail.limit_num},issub:function(){return this.form.show_sku.sum<=1}},watch:{isPopup:function(e,t){e!=t&&(this.Visible=e,this.isOpenSpec||(this.form=this.productModel,this.isOpenSpec=!0,this.initShowSku()),this.form.type=this.productModel.type)},"form.specData":{handler(e,t){let s="",a="";if(this.isAll=!0,e){for(let t=0;t<e.spec_attr.length;t++)null==this.form.productSpecArr[t]?(this.isAll=!1,s+=e.spec_attr[t].group_name+" "):e.spec_attr[t].spec_items.forEach((e=>{this.form.productSpecArr[t]==e.item_id&&(a+='"'+e.spec_value+'" ')}));this.isAll?a="已选: "+a:s="请选择: "+s}this.selectSpec=this.isAll?a:s},deep:!0,immediate:!0}},methods:{initShowSku(){this.form.show_sku.sku_image=this.form.detail.image[0].file_path,this.form.show_sku.product_price=this.form.detail.product_price,20==this.form.detail.spec_type&&this.form.detail.product_price!=this.form.detail.product_max_price&&(this.form.show_sku.product_price=this.form.detail.product_price+"-"+this.form.detail.product_max_price),this.form.show_sku.spec_sku_id=0,this.form.show_sku.line_price=this.form.detail.line_price,this.form.show_sku.stock_num=this.form.detail.product_stock,this.form.show_sku.sum=1,this.stock=this.form.detail.product_stock,"advance"==this.form.plus_name&&(this.form.show_sku.product_price=this.form.plus_sku[0].product_price,this.form.show_sku.line_price="",this.form.show_sku.sku_image=this.form.plus_sku[0].productSku.image?this.form.plus_sku[0].productSku.image.file_path:this.form.detail.image[0].file_path,this.form.show_sku.stock_num=this.form.plus_sku[0].advance_stock,this.stock=this.form.plus_sku[0].advance_stock),"seckill"==this.form.plus_name&&(this.form.show_sku.product_price=this.form.plus_sku[0].seckill_price,this.form.show_sku.line_price=this.form.plus_sku[0].product_price,this.form.show_sku.sku_image=this.form.plus_sku[0].productSku.image?this.form.plus_sku[0].productSku.image.file_path:this.form.detail.image[0].file_path,this.form.show_sku.stock_num=this.form.plus_sku[0].seckill_stock,this.stock=this.form.plus_sku[0].seckill_stock)},selectAttr(e,t){let s=this,a=s.form.specData.spec_attr[e].spec_items,o=a[t];if(o.checked)o.checked=!1,s.form.productSpecArr[e]=null;else{for(let e=0;e<a.length;e++)a[e].checked=!1;o.checked=!0,s.form.productSpecArr[e]=o.item_id}for(let l=0;l<s.form.productSpecArr.length;l++)if(null==s.form.productSpecArr[l])return void s.initShowSku();s.updateSpecProduct()},updateSpecProduct(){let e=this,t=e.form.productSpecArr.join("_"),s=e.form.specData.spec_list;null!=e.form.plus_sku&&(s=e.form.plus_sku);let a=s.find((s=>e.form.plus_name?s.productSku.spec_sku_id==t:s.spec_sku_id==t));if(!a)return e.clock=!0,void e.initShowSku();e.clock=!1,e.form.plus_name&&!a.spec_form&&(a.spec_form=a.productSku),"object"==typeof a&&(e.form.plus_name?(e.stock=a[e.form.plus_name+"_stock"],e.form.show_sku.sum>e.stock&&(e.form.show_sku.sum=e.stock>0?e.stock:1)):(e.stock=a.spec_form.stock_num,e.form.show_sku.sum>e.stock&&(e.form.show_sku.sum=e.stock>0?e.stock:1)),e.form.show_sku.spec_sku_id=t,e.form.show_sku.product_price=a.spec_form.product_price,e.form.show_sku.line_price=a.spec_form.line_price,a.spec_form.image_id>0?e.form.show_sku.sku_image=a.spec_form.image_path:e.form.show_sku.sku_image=e.form.detail.image[0].file_path,e.form.show_sku.stock_num=a.spec_form.stock_num,e.form.plus_name&&(e.form.show_sku.product_price=a.product_price,"seckill"==e.form.plus_name&&(e.form.show_sku.product_price=a.seckill_price),e.form.show_sku.stock_num=a[e.form.plus_name+"_stock"],e.form.show_sku.line_price="",e.form.show_sku.sku_image=a.spec_form.image?a.spec_form.image.file_path:e.form.detail.image[0].file_path,e.form.show_sku.advance_product_id=a.spec_form.image?a.spec_form.image.file_path:e.form.detail.image[0].file_path))},closePopup(){this.$emit("close",this.form.specData,null)},confirmFunc(){if(null!=this.form.specData)for(let e=0;e<this.form.productSpecArr.length;e++)if(null==this.form.productSpecArr[e])return void o({title:"请选择规格",icon:"none",duration:2e3});"card"==this.form.type?this.addCart():("order"==this.form.type||"deposit"==this.form.type)&&this.createdOrder()},addCart(){let e=this,t=e.form.detail.product_id,s=e.form.show_sku.sum,a=e.form.show_sku.spec_sku_id;if(20==e.form.detail.spec_type&&0==a)return o({title:"请选择属性",icon:"none",duration:2e3}),!1;e._post("order.cart/add",{product_id:t,total_num:s,spec_sku_id:a},(function(t){o({title:t.msg,duration:2e3}),e.$emit("close",null,t.data.cart_total_num)}))},createdOrder(){let e=this.form.detail.product_id,t=this.form.show_sku.sum,s=this.form.show_sku.spec_sku_id,a="";0!=this.room_id&""!=this.room_id&&(a="&room_id="+this.form.room_id);let o="/pages/order/confirm-order?product_id="+e+"&product_num="+t+"&product_sku_id="+s+"&order_type=buy"+a;if("deposit"==this.form.type){if("advance"==this.form.plus_name){let a=this.form.detail.advance.sku.find((e=>e.productSku.spec_sku_id==s));o="/pages/order/confirm-order?product_id="+e+"&product_num="+t+"&product_sku_id="+s+"&advance_product_sku_id="+a.advance_product_sku_id+"&advance_product_id="+a.advance_product_id+"&order_type=deposit"}if("seckill"==this.form.plus_name){let e=this.form.detail.secKill.seckillSku.find((e=>e.productSku.spec_sku_id==s));o="/pages/order/confirm-order?seckill_product_id="+e.seckill_product_id+"&product_num="+t+"&product_sku_id="+e.productSku.spec_sku_id+"&seckill_product_sku_id="+e.seckill_product_sku_id+"&order_type=seckill"}}this.gotoPage(o)},add(){if(!(this.stock<=0))return this.form.show_sku.sum>=this.stock?(o({title:"数量超过了库存",icon:"none",duration:2e3}),!1):this.form.detail.limit_num>0&&this.form.show_sku.sum>=this.form.detail.limit_num?(o({title:"数量超过了限购数量",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum++},sub(){if(!(this.stock<=0))return this.form.show_sku.sum<2?(o({title:"商品数量至少为1",icon:"none",duration:2e3}),!1):void this.form.show_sku.sum--}}},[["render",function(e,t,s,a,o,h){const x=g,C=b,H=k,P=v,S=y,I=w;return l(),i(x,{class:A(o.Visible?"product-popup open":"product-popup close"),onTouchmove:t[5]||(t[5]=r((()=>{}),["stop","prevent"])),onClick:h.closePopup},{default:c((()=>[u(x,{class:"popup-bg"}),u(x,{class:"main",onClick:t[4]||(t[4]=r((()=>{}),["stop"]))},{default:c((()=>[u(x,{class:"header"},{default:c((()=>[u(C,{src:o.form.show_sku.sku_image,mode:"aspectFit",class:"avt"},null,8,["src"]),u(x,{class:"price"},{default:c((()=>[d(" ¥ "),u(H,{class:"num"},{default:c((()=>[d(m(o.form.show_sku.product_price),1)])),_:1}),o.form.show_sku.line_price?(l(),i(H,{key:0,class:"old-price"},{default:c((()=>[d("¥"+m(o.form.show_sku.line_price),1)])),_:1})):f("",!0)])),_:1}),u(x,{class:"stock"},{default:c((()=>[d("库存："+m(o.form.show_sku.stock_num),1)])),_:1}),u(x,{class:"select_spec"},{default:c((()=>[d(m(o.selectSpec),1)])),_:1}),u(x,{class:"close-btn",onClick:h.closePopup},{default:c((()=>[u(H,{class:"icon iconfont icon-guanbi"})])),_:1},8,["onClick"])])),_:1}),u(x,{class:"body"},{default:c((()=>[u(x,null,{default:c((()=>[null!=o.form.specData?(l(),i(S,{key:0,"scroll-y":"true",class:"specs mt20",style:{"max-height":"600rpx"}},{default:c((()=>[(l(!0),n(_,null,p(o.form.specData.spec_attr,((e,t)=>(l(),i(x,{class:"specs mt20",key:t},{default:c((()=>[u(x,{class:"specs-hd p-20-0"},{default:c((()=>[u(H,{class:"f26 gray3"},{default:c((()=>[d(m(e.group_name),1)])),_:2},1024)])),_:2},1024),u(x,{class:"specs-list"},{default:c((()=>[(l(!0),n(_,null,p(e.spec_items,((e,s)=>(l(),i(P,{class:A(e.checked?"btn-checked":"btn-checke"),key:s,onClick:e=>h.selectAttr(t,s)},{default:c((()=>[d(m(e.spec_value),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):f("",!0)])),_:1}),u(x,{class:"level-box count_choose"},{default:c((()=>[u(H,{class:"key"},{default:c((()=>[d("数量")])),_:1}),u(x,{class:"d-s-c"},{default:c((()=>[u(x,{class:A(["icon-box minus d-c-c",{"num-wrap":!h.issub}]),onClick:t[0]||(t[0]=e=>h.sub())},{default:c((()=>[u(H,{class:"icon iconfont icon-jian",style:{"font-size":"20rpx",color:"#333333"}})])),_:1},8,["class"]),u(x,{class:"text-wrap"},{default:c((()=>[u(I,{type:"text",modelValue:o.form.show_sku.sum,"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.show_sku.sum=e)},null,8,["modelValue"])])),_:1}),u(x,{class:A(["icon-box plus d-c-c",{"num-wrap":!h.isadd}]),onClick:t[2]||(t[2]=e=>h.add())},{default:c((()=>[u(H,{class:"icon iconfont icon-jia",style:{"font-size":"20rpx",color:"#333333"}})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),u(x,{class:"btns"},{default:c((()=>[o.clock?(l(),i(P,{key:1,class:"confirm-btn"},{default:c((()=>[d("暂无库存")])),_:1})):(l(),i(P,{key:0,class:"confirm-btn",onClick:t[3]||(t[3]=e=>h.confirmFunc(o.form))},{default:c((()=>[d("确认")])),_:1}))])),_:1})])),_:1})])),_:1},8,["class","onClick"])}],["__scopeId","data-v-dbd98640"]]),share:Q,uniPopup:T,Mpservice:e({components:{Popup:T},data:()=>({isPopup:!1,width:600,dataModel:{}}),created(){this.isPopup=!0,this.getData()},methods:{getData(){let e=this;e._get("index/mpService",{},(function(t){e.dataModel=t.data.mp_service}))},hidePopupFunc(e){this.isPopup=!1,this.$emit("close")},copyQQ(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t),o({title:"复制成功",icon:"success",mask:!0,duration:2e3})}}},[["render",function(e,t,s,a,o,r){const n=k,p=g,_=b,f=x("Popup");return l(),i(f,{show:o.isPopup,width:o.width,padding:0,onHidePopup:r.hidePopupFunc},{default:c((()=>[u(p,{class:"d-s-s d-c p20 mpservice-wrap"},{default:c((()=>[u(p,{class:"d-b-c p-30-0 f34 ww100 border-b",onClick:t[0]||(t[0]=e=>r.copyQQ(o.dataModel.qq))},{default:c((()=>[u(n,{class:"gray9",style:{width:"140rpx"}},{default:c((()=>[d("QQ：")])),_:1}),u(n,{class:"p-0-30 flex-1"},{default:c((()=>[d(m(o.dataModel.qq),1)])),_:1}),u(n,{class:"blue"},{default:c((()=>[d("复制")])),_:1})])),_:1}),u(p,{class:"d-b-c p-30-0 f34 ww100",onClick:t[1]||(t[1]=e=>r.copyQQ(o.dataModel.qq))},{default:c((()=>[u(n,{class:"gray9",style:{width:"140rpx"}},{default:c((()=>[d("微信号：")])),_:1}),u(n,{class:"p-0-30 flex-1"},{default:c((()=>[d(m(o.dataModel.wechat),1)])),_:1}),u(n,{class:"blue"},{default:c((()=>[d("复制")])),_:1})])),_:1}),u(p,{class:"mp-image"},{default:c((()=>[u(_,{src:o.dataModel.mp_image,mode:"widthFix"},null,8,["src"])])),_:1}),u(p,{class:"ww100 pt10 tc f30 gray9"},{default:c((()=>[d(" 公众号 ")])),_:1})])),_:1}),u(p,{class:"d-c-c ww100"},{default:c((()=>[u(p,{class:"p20",onClick:t[2]||(t[2]=e=>r.hidePopupFunc(!0))},{default:c((()=>[u(n,{class:"icon iconfont icon-guanbi"})])),_:1})])),_:1})])),_:1},8,["show","width","onHidePopup"])}],["__scopeId","data-v-128410e7"]]),coupon:E,Countdown:e({data:()=>({status:0,day:"0",hour:"0",minute:"0",second:"0",timer:null,totalSeconds:0,title:"还剩"}),props:{config:{type:Object,default:function(){return{type:"all"}}},color:{type:String,default:function(){return"#ffffff"}},timeSize:{type:String,default:function(){return"28rpx"}}},created(){},watch:{config:{deep:!0,handler:function(e,t){e!=t&&0!=e.endstamp&&(e.title&&void 0!==e.title&&(this.title=e.title),this.setTime())},immediate:!0}},methods:{setTime(){let e=this;e.timer=setInterval((function(){e.init()}),1e3)},init(){let e=Date.now()/1e3;e<this.config.startstamp?(this.totalSeconds=parseInt(this.config.startstamp-e),this.status=1,this.title="距开始还剩",this.countDown()):e>this.config.endstamp?this.status=2:(this.totalSeconds=parseInt(this.config.endstamp-e),this.status=0,this.title="距截止还剩",this.countDown()),this.$emit("returnVal",this.status)},countDown(){let e=this.totalSeconds,t=Math.floor(e/86400),s=e%86400,a=Math.floor(s/3600);s%=3600;let o=Math.floor(s/60),l=s%60;this.day=this.convertTwo(t),this.hour=this.convertTwo(a),this.minute=this.convertTwo(o),this.second=this.convertTwo(l),this.totalSeconds--},convertTwo(e){let t="";return t=e<10?"0"+e:e,t},getLocalTime:e=>new Date(1e3*parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," "),clear(){console.log(1),clearInterval(this.timer),this.timer=null}},destroyed(){clearInterval(this.timer)}},[["render",function(e,t,s,a,o,r){const p=k,f=g;return l(),i(f,{class:"countdown",style:h("color:"+s.color)},{default:c((()=>[2==o.status?(l(),n(_,{key:0},[d("活动已结束")],64)):(l(),n(_,{key:1},[d(m(o.title)+" ",1),u(p,{class:"mr10"},{default:c((()=>[d(m(parseInt(o.day)+"天"),1)])),_:1}),u(p,{class:"f28",style:h("font-size:"+s.timeSize+";")},{default:c((()=>[d(m(parseInt(o.hour))+":"+m(o.minute)+":"+m(o.second),1)])),_:1},8,["style"])],64))])),_:1},8,["style"])}],["__scopeId","data-v-db0aca58"]]),previewProduct:e({components:{Countdown:e({data:()=>({status:0,day:"0",hour:"0",minute:"0",second:"0",timer:null,totalSeconds:0,title:"活动剩余："}),props:{config:{type:Object,default:function(){return{type:"all"}}},back_color:{type:String,default:()=>""},cut_color:{type:String,default:()=>""},color:{type:String,default:()=>""},start_name:{type:String,default:()=>"距开始:"},end_name:{type:String,default:()=>"距结束:"},activeName:{type:String,default:()=>""}},created(){},watch:{config:{deep:!0,handler:function(e,t){e!=t&&0!=e.endstamp&&(e.title&&e.title,this.setTime())},immediate:!0}},methods:{setTime(){let e=this;e.timer=setInterval((function(){e.init()}),1e3)},init(){let e=Date.now()/1e3;e<this.config.startstamp?(this.status=1,this.totalSeconds=parseInt(this.config.startstamp-e),this.countDown(),this.title=this.start_name):e>this.config.endstamp?(this.status=2,this.title=this.end_name):(this.totalSeconds=parseInt(this.config.endstamp-e),this.status=0,this.countDown(),this.title=this.end_name),this.$emit("returnVal",this.status)},countDown(){let e=this.totalSeconds,t=Math.floor(e/86400),s=e%86400,a=Math.floor(s/3600);s%=3600;let o=Math.floor(s/60),l=s%60;this.day=t,this.hour=this.convertTwo(a),this.minute=this.convertTwo(o),this.second=this.convertTwo(l),this.totalSeconds--},convertTwo(e){let t="";return t=e<10?"0"+e:e,t},getLocalTime:e=>new Date(1e3*parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," "),clear(){console.log(1),clearInterval(this.timer),this.timer=null}},destroyed(){clearInterval(this.timer)}},[["render",function(e,t,s,a,o,r){const p=k,y=g;return l(),i(y,{class:A(["countdown",s.activeName]),style:h("color:"+s.color)},{default:c((()=>[null==s.config.type?(l(),n(_,{key:0},[d(m(o.title),1),u(p,{class:"daybox",style:h("background-color: "+s.back_color+";color:"+s.cut_color)},{default:c((()=>[d(m(o.day)+"天",1)])),_:1},8,["style"]),u(p,{class:"numbox"},{default:c((()=>[d(m(o.hour)+":"+m(o.minute)+":"+m(o.second),1)])),_:1})],64)):f("",!0),"text"===s.config.type?(l(),n(_,{key:1},[d(m(parseInt(24*o.day)+parseInt(o.hour))+":"+m(o.minute)+":"+m(o.second),1)],64)):f("",!0),"preview"===s.config.type?(l(),n(_,{key:2},[d(m(o.title),1),u(p,{class:"daybox",style:h("background-color: "+s.back_color+";color:"+s.cut_color)},{default:c((()=>[d(m(o.day)+"天",1)])),_:1},8,["style"]),u(p,{class:"box",style:h("background-color: "+s.back_color+";color:"+s.cut_color)},{default:c((()=>[d(m(o.hour),1)])),_:1},8,["style"]),u(p,{class:"p-0-10",style:h("color:"+s.color)},{default:c((()=>[d(":")])),_:1},8,["style"]),u(p,{class:"box",style:h("background-color: "+s.back_color+";color:"+s.cut_color)},{default:c((()=>[d(m(o.minute),1)])),_:1},8,["style"]),u(p,{class:"p-0-10",style:h("color:"+s.color)},{default:c((()=>[d(":")])),_:1},8,["style"]),u(p,{class:"box",style:h("background-color: "+s.back_color+";color:"+s.cut_color)},{default:c((()=>[d(m(o.second),1)])),_:1},8,["style"]),u(p,{class:"p-0-10",style:h("color:"+s.color)},null,8,["style"])],64)):f("",!0)])),_:1},8,["style","class"])}],["__scopeId","data-v-37c8a181"]])},data:()=>({}),props:["detail","is_fav"],methods:{sendFunc(e){this.$emit("send",e)},returnValFunc(e){}}},[["render",function(e,t,s,a,o,r){const n=g,p=k,_=x("Countdown"),h=v;return l(),i(n,null,{default:c((()=>[u(n,{class:"limited-spike m-0-20 d-b-s"},{default:c((()=>[u(n,{class:"active-name mr20"},{default:c((()=>[u(n,null,{default:c((()=>[d("预")])),_:1}),u(n,null,{default:c((()=>[d("告")])),_:1})])),_:1}),u(n,{class:"flex-1 pt16"},{default:c((()=>[u(n,{class:"white"},{default:c((()=>[u(p,{class:"f28 fb"},{default:c((()=>[d("￥")])),_:1}),u(p,{class:"f42 fb"},{default:c((()=>[d(m(e.subPrice(s.detail.product_price,"1"))+".",1)])),_:1}),u(p,{class:"f24 fb"},{default:c((()=>[d(m(e.subPrice(s.detail.product_price,"2")),1)])),_:1})])),_:1}),u(n,{class:"old-price"},{default:c((()=>[d("￥"+m(s.detail.product_sku.line_price),1)])),_:1})])),_:1}),u(n,{class:"right-time"},{default:c((()=>[u(_,{activeName:"previewProduct",ref:"countdown",config:{startstamp:s.detail.preview.start_time,endstamp:s.detail.preview.end_time,type:"preview"},start_name:"距开始仅剩",end_name:"距开始仅剩",onReturnVal:r.returnValFunc},null,8,["config","onReturnVal"])])),_:1})])),_:1}),u(n,{class:"bg-white m-0-20 mb20 p20 mt-down-box"},{default:c((()=>[u(n,{class:"f30 gray3"},{default:c((()=>[d(m(s.detail.product_name),1)])),_:1}),s.detail.selling_point?(l(),i(n,{key:0,class:"product-describe"},{default:c((()=>[d(m(s.detail.selling_point),1)])),_:1})):f("",!0),u(n,{class:"border-t d-b-c mt20"},{default:c((()=>[u(h,{class:"flex-1 active-btn d-c-c",onClick:t[0]||(t[0]=e=>r.sendFunc("showShare"))},{default:c((()=>[u(p,{class:"icon iconfont icon-fenxiang3 shoucang-icon"}),u(p,{class:"f28 gray9"},{default:c((()=>[d("分享")])),_:1})])),_:1}),u(h,{class:"flex-1 active-btn d-c-c",onClick:t[1]||(t[1]=e=>r.sendFunc("favorite"))},{default:c((()=>[u(p,{class:A([s.is_fav?"icon-shoucang2 dominant":"icon-shoucang1","icon iconfont shoucang-icon"]),src:"/static/icon/sc.png",mode:""},null,8,["class"]),u(p,{class:A(["f28",s.is_fav?"dominant":"gray9"])},{default:c((()=>[d("收藏")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-cdf50aee"]])},data:()=>({ispresale:!1,phoneHeight:0,scrollviewHigh:0,loadding:!0,indicatorDots:!0,autoplay:!1,interval:2e3,duration:500,isPopup:!1,product_id:null,detail:{product_sku:{},show_sku:{product_price:"",product_sku_id:0,line_price:"",stock_num:0,sku_image:""}},specData:null,productModel:{},buyNow:!1,url:"",productSpecArr:[],cart_total_num:0,isbottmpanel:!1,isCreatedImg:!1,poster_img:"",isMpservice:!1,alreadyChioce:"",is_virtual:1,isVideoPlay:!1,is_fav:!1,isCoupon:!1,couponList:[],show_discount:"",discount:{product_coupon:[],product_reduce:[],give_points:""},countdownConfig:{startstamp:0,endstamp:0},activeName:"",activePrice:"",activeText:"",skuName:"",is_preview:!1}),onReady(){C({frontColor:"#000000",backgroundColor:"#F5F5F5"})},onLoad(e){let t=H.getSceneData(e);this.product_id=e.product_id?e.product_id:t.gid,this.url=window.location.href},mounted(){this.init(),this.getData()},methods:{init(){let e=this;t({success(t){e.phoneHeight=t.windowHeight,P().select(".btns-wrap").boundingClientRect((t=>{let s=e.phoneHeight-t.height;e.scrollviewHigh=s})).exec()}})},getData(){let e=this,t=e.product_id;s({title:"加载中"}),e._get("product.product/detail",{product_id:t,url:e.url},(function(t){if(e.cart_total_num=t.data.cart_total_num,t.data.detail.content=H.format_content(t.data.detail.content),e.activeName&&"advance"!=e.activeName?t.data.detail[e.activeName].specData&&e.initSpecData(t.data.detail[e.activeName].specData):20==t.data.detail.spec_type&&e.initSpecData(t.data.specData),e.detail=t.data.detail,e.is_virtual=t.data.detail.is_virtual,e.is_fav=t.data.is_fav,e.show_discount=t.data.show_discount,e.discount=t.data.discount,e.isWeixin()&&""!=e.url){let s={product_id:e.product_id};e.configWx(t.data.share.signPackage,t.data.share.shareParams,s)}e.loadding=!1,a()}))},initSpecData(e){for(let t in e.spec_attr)for(let s in e.spec_attr[t].spec_items)e.spec_attr[t].spec_items[s].checked=!1;this.specData=e,this.specData.spec_attr&&(this.specData.spec_attr.forEach((e=>{this.alreadyChioce+=e.group_name,this.alreadyChioce+=" / "})),this.alreadyChioce=this.alreadyChioce.replace(/(\s\/\s)$/gi,""))},openPopup(e){let t={specData:this.specData,detail:this.detail,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],show_sku:{sku_image:"",price:0,product_sku_id:0,line_price:0,stock:0,product_sku_id:0,sum:1},plus_sku:null,type:e,plus_name:""};this.productModel=t,this.isPopup=!0},closePopup(e,t){if(this.isPopup=!1,e&&e.spec_attr){this.alreadyChioce="";let t="已选：",s="";e.spec_attr.forEach((e=>{if(e.spec_items){let a="";for(let t=0;t<e.spec_items.length;t++){let s=e.spec_items[t];if(s.checked){a=s.spec_value+" / ";break}}""!=a?t+=a:s+=e.group_name}})),""!=s?this.alreadyChioce=s:(t=t.replace(/(\s\/\s)$/gi,""),this.alreadyChioce=t)}t&&(this.cart_total_num=t)},openCoupon(){this.isCoupon=!this.isCoupon,console.log(this.isCoupon)},closeCouponFunc(e){this.isCoupon=!1},lookEvaluate(e){this.gotoPage("/pages/product/detail/look-evaluate/look-evaluate?product_id="+e)},onShareAppMessage(){let e=this;e.taskFunc();let t=e.getShareUrlParams({product_id:e.product_id});return{title:e.detail.product_name,path:"/pages/product/detail/detail?"+t}},gotocart(){S({url:"/pages/cart/cart"})},closeBottmpanel(e){this.isbottmpanel=!1,2==e.type&&(this.poster_img=e.poster_img,this.isCreatedImg=!0)},showShare(){this.isbottmpanel=!0},hidePopupFunc(){this.isCreatedImg=!1},savePosterImg(){let e=this;s({title:"加载中"}),I({url:e.poster_img,success(t){a(),M({filePath:t.tempFilePath,success(t){o({title:"保存成功",icon:"success",duration:2e3}),e.isCreatedImg=!1},fail(e){"saveImageToPhotosAlbum:fail auth deny"===e.errMsg&&(o({title:"请允许访问相册后重试",icon:"none",duration:1e3}),setTimeout((()=>{uni.openSetting()}),1e3))},complete(e){console.log("complete")}})}})},goback(){let e=F();console.log(e.length),e.length<=1?this.gotoPage("/pages/index/index"):X()},openMaservice(){this.isMpservice=!0},closeMpservice(){this.isMpservice=!1},changeSwiper(){this.isVideoPlay=!1},favorite(){let e=this;e._post("user.favorite/fav",{product_id:e.product_id},(t=>{e.is_fav?e.is_fav=!1:e.is_fav=!0}))},returnValFunc(e){},sendFunc(e){this[e]()}}},[["render",function(e,t,s,a,o,r){const w=g,C=b,H=D,P=N,S=V,I=x("previewProduct"),M=k,F=x("Countdown"),X=v,K=y,T=x("spec"),E=x("share"),Q=x("uniPopup"),U=x("Mpservice"),Z=x("coupon");return l(),i(w,{class:A(["product-detail pr",e.theme()||""]),"data-theme":e.theme()},{default:c((()=>[o.loadding?f("",!0):(l(),i(K,{key:0,"scroll-y":"true",class:"scroll-Y scroll-box",style:h("height:"+o.scrollviewHigh+"px")},{default:c((()=>[u(w,{class:"ww100",style:h("height:"+e.topBarTop()+"px")},null,8,["style"]),u(w,{class:"product-pic"},{default:c((()=>[u(S,{class:"swiper","indicator-active-color":"#ffffff","indicator-color":"rgba(255,255,255,.3)","indicator-dots":o.indicatorDots,autoplay:o.autoplay,interval:o.interval,duration:o.duration,onChange:r.changeSwiper},{default:c((()=>[0!=o.detail.video_id?(l(),i(P,{key:0},{default:c((()=>[o.isVideoPlay?f("",!0):(l(),i(w,{key:0,class:"icon iconfont icon-bofang",onClick:t[0]||(t[0]=e=>o.isVideoPlay=!0)})),o.isVideoPlay?f("",!0):(l(),i(C,{key:1,src:o.detail.poster?o.detail.poster.file_path:o.detail.image[0].file_path,mode:"",onClick:t[1]||(t[1]=e=>o.isVideoPlay=!0)},null,8,["src"])),o.isVideoPlay?(l(),i(H,{key:2,src:o.detail.video.file_path,autoplay:o.isVideoPlay,onClick:t[2]||(t[2]=e=>o.isVideoPlay=!1),class:"video",controls:!1,"show-center-play-btn":!1,"show-play-btn":!1,"enable-progress-gesture":!1},null,8,["src","autoplay"])):f("",!0)])),_:1})):f("",!0),(l(!0),n(_,null,p(o.detail.image,((e,t)=>(l(),i(P,{key:t},{default:c((()=>[u(C,{src:e.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1024)))),128))])),_:1},8,["indicator-dots","autoplay","interval","duration","onChange"])])),_:1}),1==o.is_preview?(l(),n(_,{key:0},[o.loadding?f("",!0):(l(),i(I,{key:0,detail:o.detail,onSend:r.sendFunc,is_fav:o.is_fav},null,8,["detail","onSend","is_fav"]))],64)):f("",!0),o.ispresale?(l(),n(_,{key:1},[u(w,{class:"limited-spike m-0-20"},{default:c((()=>[u(w,{class:"d-s-c mb16"},{default:c((()=>["advance"==o.activeName?(l(),i(w,{key:0,class:"f32"},{default:c((()=>[d(" ￥ "),u(M,{class:"f42 fb"},{default:c((()=>[d(m(e.subPrice(o.detail[o.activeName][o.skuName][0].product_price,"1"))+".",1)])),_:1}),u(M,{class:"f24 fb"},{default:c((()=>[d(m(e.subPrice(o.detail[o.activeName][o.skuName][0].product_price,"2")),1)])),_:1})])),_:1})):(l(),i(w,{key:1,class:"f32"},{default:c((()=>[d(" ￥ "),u(M,{class:"f42 fb"},{default:c((()=>[d(m(e.subPrice(o.detail[o.activeName][o.skuName][0][o.activePrice],"1"))+".",1)])),_:1}),u(M,{class:"f24 fb"},{default:c((()=>[d(m(e.subPrice(o.detail[o.activeName][o.skuName][0][o.activePrice],"2")),1)])),_:1})])),_:1})),"advance"==o.activeName?(l(),i(w,{key:2,class:"tips-box"},{default:c((()=>[d(" 预估到手价￥"+m((1*o.detail[o.activeName][o.skuName][0].product_price-1*o.detail[o.activeName][o.skuName][0][o.activePrice]).toFixed(2)),1)])),_:1})):f("",!0)])),_:1}),"advance"==o.activeName?(l(),i(M,{key:0,class:"left-name"},{default:c((()=>[d("定金¥"+m(o.detail[o.activeName].money)+" (尾款立减¥"+m(o.detail[o.activeName][o.skuName][0][o.activePrice])+")",1)])),_:1})):f("",!0),u(w,{class:"right-time"},{default:c((()=>[u(w,{class:"d-e-c mb16"},{default:c((()=>[d(m(o.activeText)+" ",1),u(C,{class:"jiantou",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAMAAACf4xmcAAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VHQRUAAAAMnRSTlMA75cGkArJkwzf29fZzsQT6uXAt66LUUxIMCv9+p9+c2NAGvPh0YSAViEOpHZsWVc3I/YTX7AAAAFFSURBVDjLdZPZkoIwEEVvBgRFBwQBwX0bR509//9xEyw0SXdyHrtOOjddHVgcmqpIhDilcf0HHz/lUmqKXQAH35EkjL5AuZXSwesCFm0u3dQwWKykj4thHftauR0xr0HPQPSVFBhOmPfIN3sUIihvTLUcd+a68tL1Tqj3jg4zTgUgo94y65tpYjjybXQyfS/PJ4BManQ+4rVoJCXs+o3IIyrp9DIrX4qCazxfYo7Dn28KIV2UAyDQMxAebao0VIaWu6y3zorNSyPX0gYAQnPd8cKtqLNi6xxqZqVQfJBJHlgukF6KPRD5cmlWA2DHrdgx7UCQ9PxVV8BqF0GxptYad57LkPBcitUQd66PwoznUswB+28tt/s1sz7x5CK9nGHQ+KwtLNqJSxI1KOcjX+IMnMPmZHUKW3j43RTjXIhpkob7Gwz+AXSjv+LMSGJZAAAAAElFTkSuQmCC",mode:""})])),_:1}),u(F,{ref:"countdown",config:{startstamp:o.detail[o.activeName].start_time,endstamp:o.detail[o.activeName].end_time},onReturnVal:r.returnValFunc},null,8,["config","onReturnVal"])])),_:1})])),_:1}),u(w,{class:"bg-white m-0-20 mb20 p20 mt-down-box"},{default:c((()=>[u(w,{class:"f30 gray3"},{default:c((()=>[d(m(o.detail.product_name),1)])),_:1}),o.detail.selling_point?(l(),i(w,{key:0,class:"product-describe"},{default:c((()=>[d(m(o.detail.selling_point),1)])),_:1})):f("",!0),"advance"==o.activeName?(l(),i(w,{key:1,class:"product-presale"},{default:c((()=>[u(w,{class:"d-b-s"},{default:c((()=>[u(w,{class:"gray3 f24",style:{width:"100rpx"}},{default:c((()=>[d("尾款：")])),_:1}),u(w,{class:"flex-1"},{default:c((()=>[u(w,{class:"f24 redF11"},{default:c((()=>[d(" ￥"+m((1*o.detail[o.activeName][o.skuName][0].product_price-1*o.detail[o.activeName][o.skuName][0][o.activePrice]).toFixed(2)),1)])),_:1}),u(w,{class:"gray9 f26"},{default:c((()=>[d("("+m(o.detail[o.activeName].active_time[0])+"-"+m(o.detail[o.activeName].active_time[1])+")",1)])),_:1})])),_:1})])),_:1}),u(w,{class:"d-b-s"},{default:c((()=>[u(w,{class:"gray3 f24",style:{width:"100rpx"}},{default:c((()=>[d("流程：")])),_:1}),u(w,{class:"flex-1 gray6 f24"},{default:c((()=>[d("1.付定金-2.付尾款-3.发货")])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1})],64)):f("",!0),o.ispresale||1==o.is_preview?f("",!0):(l(),i(w,{key:2,class:"bg-white p30 mb22"},{default:c((()=>[u(w,{class:"price-wrap"},{default:c((()=>[u(w,{class:"d-s-s d-c ww100"},{default:c((()=>[u(w,{class:"d-s-c pr ww100 mb16"},{default:c((()=>[u(w,{class:"new-price theme-price"},{default:c((()=>[o.detail.is_user_grade?(l(),i(M,{key:0,class:"fn mr10"},{default:c((()=>[d("会员价")])),_:1})):f("",!0),u(M,null,{default:c((()=>[d("¥")])),_:1}),u(M,{class:"num"},{default:c((()=>[d(m(o.detail.product_sku.product_price),1)])),_:1}),20==o.detail.spec_type&&o.detail.product_sku.product_price!=o.detail.product_max_price?(l(),i(M,{key:1,class:"num"},{default:c((()=>[d(" -"+m(o.detail.product_max_price),1)])),_:1})):f("",!0)])),_:1}),u(w,{class:"share-box"},{default:c((()=>[u(X,{onClick:r.showShare},{default:c((()=>[u(C,{class:"share_img",src:"data:image/png;base64,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",mode:""}),u(M,{class:"f26"},{default:c((()=>[d("分享")])),_:1})])),_:1},8,["onClick"])])),_:1}),u(w,{class:"sc-box"},{default:c((()=>[u(X,{onClick:t[3]||(t[3]=e=>r.favorite())},{default:c((()=>[u(C,{class:A([o.is_fav?"":"img_gray","share_img"]),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAz1BMVEUAAADYHgbYHgXZHgXYHgbYHgXYHQXZHgbZHQXYHgXZHgbXHgXZHgbYHQbZHgbZHgXYHgbaHgXXHAXYHgbZHgXYHgXYHgXYHgXZHgXYHgbYHQXXHgPZHgXYHgXaHgXYHgXZHgXaHwXYHQXYHgXYHgXZHgbYHQXZHgbZHgXZHQXYHgbYHQbZHQXZHQXcHAbbHQTWHwXVHQTXHAbYHgbaHQbYHgXVHgbZHQXHFATZHAXTGgTYHgbmEgTqEgPYHgbXHgbZHQbYHQbbHwbUIQfXIwedA0SiAAAAPnRSTlMA9O8E3QzCFOOv+WJCoFOqnHQ7CZR7b1ino5k12saITUYP1865tbKQgH5rZ15bSjAsGO7n0cCMgycfgMh2VWFE8NAAAAKzSURBVFjD7ddpV+IwFIDhi7i0ZS0WUJBVUXEBXGDEmbmhOP//N02TlF7gNJaUfJkzvJ8g5TwnXVPg0KH/oXz7p4Nhx6VcD6jzonctxjPNaKzLkNXV2svwCjc78iYgm3++RaO3sOqK/yar8oYZjKnwwmfnOUsaKkFY1uITPlPsbB+pxfosn6FrbUx7HIHH/Gs8+COirEGjmqu1L68jIfzEEK9uPfeJA4ngBcqsWf4cwia1Fq73XqWzkQQWQs4VGlVsEZej4USwupDHP+KoGsruaSgZ7MijN4S4Km+IvlMEDbDn8AmyDsR3dpuZThTbBNjbHi2L+eVA2UnMGF3Yr9uDc86xGexc3W6dyqb8VnBOw1o3D8CbBYNflsbt7qOqRZ0f2CMOjnYHPTXo28H2EQs+9WH3npgSZC4/JX4w1Rpo1LYyq4QdfTtqZMMzz15Aq5Ownrhs5quv8r7g3jvoR5fN1vNQ3HO6kPpOkTO8Nwz6rmHw65fpXR4aBvHO9DG8Af1o1du6iDMBaEHKOOhsPefFqjFOCT7ELA4ef+xUIWXFQm57KC9eY8BgFhfrBsEqB98Mgj2x5pUNip+ByNhvSNWH6igu/jRBv/E19mPIJgYtMx/aXsXxcdHPxrzLMS6+TrQ95NGdQtn8vCydsZ6HogbENUVOOk19b6DYfKMr5ukFXiUKsqLnDUDdAEUVHc+G77J3n2OXvGTRz+/rUSWGvCRxRF5SF1Lswnd16P9UciW516MEj+a36xw76oe+xvxEl/JcF814JGJxX48qMFQtM3XpXYBeZRQ9a3r64jN5unlyrzcX8SfpXUKa7pDEvTwS5Rwfo4EceelqS/Fh0ytA+tq4Jj7u5dFayKvt61H3obja37KB9yiRTZ4Zkbz9cyOvAWZyyTMlkmeoGqN/RmZ6tF049C/3Fy/V3099sTbQAAAAAElFTkSuQmCC",mode:""},null,8,["class"]),u(M,{class:A(["f26",o.is_fav?"red":"gray3"])},{default:c((()=>[d("收藏")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),u(w,null,{default:c((()=>[u(M,{class:"old-price mr16"},{default:c((()=>[d("¥"+m(o.detail.product_sku.line_price),1)])),_:1}),u(M,{class:"already-sale"},{default:c((()=>[d("已售"+m(o.detail.product_sales)+"件",1)])),_:1})])),_:1})])),_:1})])),_:1}),u(w,{class:"product-name text-ellipsis-2"},{default:c((()=>[d(m(o.detail.product_name),1)])),_:1}),o.detail.selling_point?(l(),i(w,{key:0,class:"product-describe"},{default:c((()=>[d(m(o.detail.selling_point),1)])),_:1})):f("",!0)])),_:1})),o.show_discount?(l(),i(w,{key:3,class:"o-h p-0-30 bg-white mb20 pb44",onClick:t[4]||(t[4]=e=>r.openCoupon())},{default:c((()=>[u(w,{class:"already-choice"},{default:c((()=>[u(w,{class:"group-hd d-b-s",style:{height:"auto"}},{default:c((()=>[u(w,{class:"left"},{default:c((()=>[u(M,{class:"min-name gray3"},{default:c((()=>[d("优惠：")])),_:1})])),_:1})])),_:1}),u(w,{class:"d-b-c"},{default:c((()=>[u(w,{class:"flex-1"},{default:c((()=>[o.discount.give_points>0?(l(),i(w,{key:0,class:"pb20 line-h-50 f26 gray3"},{default:c((()=>[u(M,{class:"text-box"},{default:c((()=>[d("返"+m(e.points_name()),1)])),_:1}),d(" 商城购物返"+m(e.points_name())+"，订单完成后最高返"+m(o.discount.give_points)+m(e.points_name()),1)])),_:1})):f("",!0),o.discount.product_coupon&&o.discount.product_coupon.length>0?(l(),i(w,{key:1,class:"flex-1 d-b-c"},{default:c((()=>[u(w,{class:"f26 gray3 line-h-50 pb20 flex-1"},{default:c((()=>[u(w,{class:"d-b-s"},{default:c((()=>[u(M,{class:"text-box"},{default:c((()=>[d("领券")])),_:1}),u(w,{class:"flex-1 text-coupon-list"},{default:c((()=>[(l(!0),n(_,null,p(o.discount.product_coupon,((e,t)=>(l(),n(_,{key:t},[t<=2?(l(),i(w,{key:0,class:"ml20 mb10 text-coupon-box",label:e,value:t},{default:c((()=>[u(w,{class:"text-coupon-left"}),u(w,{class:"text-coupon"},{default:c((()=>[d(m(e.name),1)])),_:2},1024),u(w,{class:"text-coupon-right"})])),_:2},1032,["label","value"])):f("",!0)],64)))),128))])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),o.discount.product_reduce&&o.discount.product_reduce.length>0?(l(),i(w,{key:2,class:"flex-1"},{default:c((()=>[u(w,{class:"f26 gray3 line-h-50 pb20"},{default:c((()=>[u(M,{class:"text-box"},{default:c((()=>[d("满减")])),_:1}),(l(!0),n(_,null,p(o.discount.product_reduce,((e,t)=>(l(),i(M,{key:t,label:e,value:t},{default:c((()=>[1==e.full_type?(l(),i(M,{key:0,class:"ml20"},{default:c((()=>[d("满"+m(e.full_value)+"元",1)])),_:2},1024)):f("",!0),2==e.full_type?(l(),i(M,{key:1,class:"ml20"},{default:c((()=>[d("满"+m(e.full_value)+"件",1)])),_:2},1024)):f("",!0),1==e.reduce_type?(l(),i(M,{key:2},{default:c((()=>[d("减"+m(e.reduce_value)+"元",1)])),_:2},1024)):f("",!0),2==e.reduce_type?(l(),i(M,{key:3},{default:c((()=>[d(m((100-e.reduce_value)/10)+"折",1)])),_:2},1024)):f("",!0)])),_:2},1032,["label","value"])))),128))])),_:1})])),_:1})):f("",!0)])),_:1}),u(w,null,{default:c((()=>[u(M,{class:"icon iconfont icon-jiantou",style:{color:"#999999","font-size":"22rpx"}})])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),u(w,{class:"o-h p-0-30 bg-white mb20"},{default:c((()=>[20==o.detail.spec_type?(l(),i(w,{key:0,class:"already-choice",onClick:t[5]||(t[5]=e=>r.openPopup(o.ispresale?"deposit":"order"))},{default:c((()=>[u(w,{class:"group-hd"},{default:c((()=>[u(w,{class:"left"},{default:c((()=>[u(M,{class:"min-name gray3"},{default:c((()=>[d("选择：")])),_:1})])),_:1}),u(w,{class:"flex-1 p-0-20 center-content f28 text-ellipsis o-h"},{default:c((()=>[d(m(o.alreadyChioce),1)])),_:1}),u(w,{class:"right"},{default:c((()=>[u(M,{class:"icon iconfont icon-jiantou",style:{"font-size":"22rpx",color:"#9A9A9A"}})])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1}),u(w,{class:"product-comment"},{default:c((()=>[u(w,{class:"p-0-30 d-b-c"},{default:c((()=>[u(w,{class:"group-hd left"},{default:c((()=>[u(M,{class:"min-name f28"},{default:c((()=>[d("评价("+m(o.detail.comment_data_count)+")",1)])),_:1})])),_:1}),u(w,{class:"right",onClick:t[6]||(t[6]=e=>r.lookEvaluate(o.detail.product_id))},{default:c((()=>[u(M,{class:"more"},{default:c((()=>[d("查看全部")])),_:1}),u(M,{class:"icon iconfont icon-jiantou",style:{"font-size":"22rpx",color:"#9A9A9A"}})])),_:1})])),_:1}),o.detail.comment_data_count>0?(l(),i(w,{key:0,class:"comment-list"},{default:c((()=>[e.index<=1?(l(!0),n(_,{key:0},p(o.detail.commentData,((e,t)=>(l(),i(w,{class:"item",key:t},{default:c((()=>[u(w,{class:"cmt-user"},{default:c((()=>[u(w,{class:"left"},{default:c((()=>[u(C,{class:"photo",src:e.user?e.user.avatarUrl:"",mode:"aspectFill"},null,8,["src"]),u(M,{class:"name"},{default:c((()=>[d(m(e.user?e.user.nickName:"未知用户"),1)])),_:2},1024)])),_:2},1024),u(M,{class:"datetime"},{default:c((()=>[d(m(e.create_time),1)])),_:2},1024)])),_:2},1024),u(w,{class:"mt20 lh150 f24"},{default:c((()=>[d(m(e.content),1)])),_:2},1024)])),_:2},1024)))),128)):f("",!0)])),_:1})):f("",!0)])),_:1}),u(w,{class:"product-content"},{default:c((()=>[u(w,{class:"p-0-30 border-b-e"},{default:c((()=>[u(w,{class:"group-hd d-s-c"},{default:c((()=>[u(M,{class:"min-name f28"},{default:c((()=>[d("商品介绍")])),_:1})])),_:1})])),_:1}),0==o.detail.is_picture?(l(),i(w,{key:0,class:"content-box",innerHTML:o.detail.content},null,8,["innerHTML"])):f("",!0),1==o.detail.is_picture?(l(),i(w,{key:1,class:"content-box"},{default:c((()=>[(l(!0),n(_,null,p(o.detail.contentImage,((e,t)=>(l(),i(w,{class:"ww100",key:t},{default:c((()=>[u(C,{class:"ww100",src:e.file_path,mode:"widthFix"},null,8,["src"])])),_:2},1024)))),128))])),_:1})):f("",!0)])),_:1})])),_:1},8,["style"])),u(w,{class:"btns-wrap"},{default:c((()=>[u(w,{class:"icon-box d-c-c",onClick:t[7]||(t[7]=t=>e.gotoPage("/pages/index/index"))},{default:c((()=>[u(X,{class:"d-c-c d-c bg-white"},{default:c((()=>[u(M,{class:"btn_btom pr icon iconfont icon-shouye gray9",style:{"font-size":"36rpx",height:"50rpx","line-height":"60rpx"}}),u(M,{class:"f22 gray9",style:{height:"50rpx","line-height":"40rpx"}},{default:c((()=>[d("首页")])),_:1})])),_:1})])),_:1}),u(w,{class:"icon-box d-c-c",onClick:r.openMaservice},{default:c((()=>[u(X,{class:"d-c-c d-c bg-white"},{default:c((()=>[u(M,{class:"icon iconfont icon-kefu gray9",style:{"font-size":"36rpx",height:"50rpx","line-height":"60rpx"}}),u(M,{class:"f22 gray9",style:{height:"50rpx","line-height":"40rpx"}},{default:c((()=>[d("客服")])),_:1})])),_:1})])),_:1},8,["onClick"]),u(w,{class:"icon-box d-c-c",onClick:r.gotocart},{default:c((()=>[u(X,{class:"pr d-c-c d-c bg-white"},{default:c((()=>[u(M,{class:"gray9 icon iconfont icon-gouwuche1",style:{"font-size":"36rpx",height:"50rpx","line-height":"60rpx"}}),u(M,{class:"f22 gray9",style:{height:"50rpx","line-height":"40rpx"}},{default:c((()=>[d("购物车")])),_:1}),o.cart_total_num>0?(l(),i(M,{key:0,class:"cart_num"},{default:c((()=>[d(m(o.cart_total_num),1)])),_:1})):f("",!0)])),_:1})])),_:1},8,["onClick"]),1==o.is_preview?(l(),i(X,{key:0,class:"add-cart-no",style:{"border-radius":"40rpx","margin-right":"20rpx"}},{default:c((()=>[d("暂未开始售卖")])),_:1})):(l(),n(_,{key:1},[o.is_virtual||o.ispresale?(l(),i(X,{key:1,class:"add-cart-no"},{default:c((()=>[d("加入购物车")])),_:1})):(l(),i(X,{key:0,class:"add-cart",onClick:t[8]||(t[8]=e=>r.openPopup("card"))},{default:c((()=>[d("加入购物车")])),_:1})),o.ispresale?(l(),i(X,{key:3,class:"buy ispresale",onClick:t[10]||(t[10]=e=>r.openPopup("deposit"))},{default:c((()=>["advance"==o.activeName?(l(),n(_,{key:0},[u(w,{class:"f28"},{default:c((()=>[d("支付定金")])),_:1}),u(w,{class:"f22"},{default:c((()=>[d("￥"+m(o.detail[o.activeName].money),1)])),_:1})],64)):(l(),n(_,{key:1},[d(" 立即购买 ")],64))])),_:1})):(l(),i(X,{key:2,class:"buy",onClick:t[9]||(t[9]=e=>r.openPopup("order"))},{default:c((()=>[d("立即购买")])),_:1}))],64))])),_:1}),u(T,{isPopup:o.isPopup,productModel:o.productModel,onClose:r.closePopup},null,8,["isPopup","productModel","onClose"]),u(E,{isbottmpanel:o.isbottmpanel,product_id:o.product_id,onClose:r.closeBottmpanel},null,8,["isbottmpanel","product_id","onClose"]),u(Q,{show:o.isCreatedImg,type:"middle",onHidePopup:r.hidePopupFunc},{default:c((()=>[u(w,{class:"d-c-c d-c create-img"},{default:c((()=>[u(C,{src:o.poster_img,mode:"widthFix"},null,8,["src"]),u(w,{class:"mt20 f34 red",type:"default"},{default:c((()=>[d("长按保存图片")])),_:1})])),_:1})])),_:1},8,["show","onHidePopup"]),o.isMpservice?(l(),i(U,{key:1,isMpservice:o.isMpservice,onClose:r.closeMpservice},null,8,["isMpservice","onClose"])):f("",!0),u(Z,{isCoupon:o.isCoupon,discount:o.discount,couponList:o.discount.product_coupon,onClose:r.closeCouponFunc},null,8,["isCoupon","discount","couponList","onClose"])])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-c1b98ba0"]]);export{U as default};
