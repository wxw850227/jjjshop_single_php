import{_ as a,o as e,c as s,w as t,b as i,n as o,i as r,g as p,V as l,M as n,C as d,D as h,H as g,k as c}from"./index-024cd044.js";import{_ as m}from"./diy.83719db6.js";import{r as f}from"./uni-app.es.5973474d.js";import{_ as u}from"./share.0e953495.js";const _=a({components:{diy:m,share:a({data:()=>({Visible:!1,poster_img:"",wechat_share:!1}),props:["isMpShare"],watch:{isMpShare:function(a,e){a!=e&&(this.Visible=a)}},methods:{closePopup(){this.$emit("close")}}},[["render",function(a,l,n,d,h,g){const c=r,m=p;return e(),s(m,{class:o(["bottom-panel",h.Visible?"bottom-panel open":"bottom-panel close"]),onClick:g.closePopup},{default:t((()=>[i(m,{class:"popup-bg"},{default:t((()=>[i(m,{class:"wechat-box"},{default:t((()=>[i(c,{src:u,mode:"widthFix"})])),_:1})])),_:1})])),_:1},8,["class","onClick"])}],["__scopeId","data-v-9ee025e7"]])},data:()=>({page_id:null,items:{},page_info:{params:{}},isMpShare:!1,url:""}),onLoad(a){this.page_id=a.page_id,this.getData(),this.url=window.location.href},methods:{hasPage:()=>l().length>1,goback(){n()},getData(a){let e=this;e._get("index/diy",{page_id:e.page_id,url:e.url},(function(a){if(e.page_info=a.data.page,e.items=a.data.items,e.setPage(e.page_info),""!=e.url){let s={page_id:e.page_id};e.configWx(a.data.share.signPackage,a.data.share.shareParams,s)}}))},setPage(a){d({title:a.params.name});let e="#000000";"white"==a.style.titleTextColor&&(e="#ffffff"),h({frontColor:e,backgroundColor:a.style.titleBackgroundColor})},onShareAppMessage(){let a=this,e=a.getShareUrlParams({page_id:a.page_id});return{title:a.page_info.params.name,path:"/pages/diy-page/diy-page?"+e}},showShare(){this.isMpShare=!0},closeBottmpanel(a){this.isMpShare=!1}}},[["render",function(a,o,r,l,n,d){const h=f(g("diy"),m),u=c("share"),_=p;return e(),s(_,{class:"diy-page"},{default:t((()=>[i(h,{diyItems:n.items},null,8,["diyItems"]),i(u,{isMpShare:n.isMpShare,onClose:d.closeBottmpanel},null,8,["isMpShare","onClose"])])),_:1})}]]);export{_ as default};
