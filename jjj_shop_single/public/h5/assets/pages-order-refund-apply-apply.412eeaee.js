import{_ as e,y as t,A as a,o as s,c as l,w as d,a as o,g as r,b as c,d as u,t as i,n as p,e as n,f,r as _,F as m,i as g,j as y,h as b,a0 as h,a2 as k,k as v}from"./index-024cd044.js";import x from"./components-upload-upload.13e9c905.js";const U=e({components:{Upload:x},data:()=>({loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,type:10,isUpload:!1,order_product_id:0,product:{},images:[],temlIds:[]}),onLoad(e){this.order_product_id=e.order_product_id},mounted(){this.getData()},methods:{getData(){let e=this;t({title:"加载中"});let s=e.order_product_id;e._get("user.refund/apply",{order_product_id:s,platform:e.getPlatform()},(function(t){e.product=t.data.detail,e.temlIds=t.data.template_arr,30==e.product.orderM.delivery_type.value&&(e.type=30),a()}))},tabType(e){this.type=e},formSubmit:function(e){let s=this;var l=e.detail.value;l.type=s.type,l.order_product_id=s.order_product_id,l.images=JSON.stringify(s.images);s.subMessage(s.temlIds,(function(){t({title:"正在提交",mask:!0}),s._post("user.refund/apply",l,(function(e){a(),o({title:e.msg,duration:3e3,complete:function(){s.gotoPage("/pages/order/refund/index/index")}})}))}))},openUpload(){this.isUpload=!0},getImgsFunc(e){let t=this;if(t.isUpload=!1,e&&void 0!==e){let a=t.images.length;if(a+e.length<7)t.images=t.images.concat(e);else{let s=6-a;for(let a=0;a<s;a++)t.images.push(e[a])}}},deleteFunc(e){this.images.splice(e,1)}}},[["render",function(e,t,a,o,x,U){const F=g,I=r,w=y,C=b,M=h,S=k,j=v("Upload");return s(),l(I,{class:"refund-apply pb100"},{default:d((()=>[c(S,{onSubmit:U.formSubmit,onReset:e.formReset},{default:d((()=>[c(I,{class:"one-product d-s-c p30 bg-white"},{default:d((()=>[c(I,{class:"cover"},{default:d((()=>[c(F,{src:x.product.image.file_path,mode:"aspectFit"},null,8,["src"])])),_:1}),c(I,{class:"flex-1"},{default:d((()=>[c(I,{class:"pro-info"},{default:d((()=>[u(i(x.product.product_name),1)])),_:1}),c(I,{class:"pt10 p-0-30 f24 gray9"},{default:d((()=>[c(w,{class:""},{default:d((()=>[u(" 单价：¥"+i(x.product.line_price),1)])),_:1}),c(w,{class:"ml20"},{default:d((()=>[u(" 数量："+i(x.product.total_num),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(I,{class:"group bg-white"},{default:d((()=>[c(I,{class:"group-hd border-b-e"},{default:d((()=>[c(I,{class:"left"},{default:d((()=>[c(w,{class:"min-name"},{default:d((()=>[u("服务类型")])),_:1})])),_:1})])),_:1}),x.product.orderM?(s(),l(I,{key:0,class:"d-s-c p-20-0"},{default:d((()=>[30!=x.product.orderM.delivery_type.value?(s(),l(C,{key:0,type:"default",class:p(10==x.type?"btn-red-border":""),onClick:t[0]||(t[0]=e=>U.tabType(10))},{default:d((()=>[u("退货/退款")])),_:1},8,["class"])):n("",!0),30!=x.product.orderM.delivery_type.value?(s(),l(C,{key:1,type:"default",class:p(20==x.type?"ml20 btn-red-border":"ml20"),onClick:t[1]||(t[1]=e=>U.tabType(20))},{default:d((()=>[u("换货")])),_:1},8,["class"])):n("",!0),c(C,{type:"default",class:p(30==x.type?"ml20 btn-red-border":"ml20"),onClick:t[2]||(t[2]=e=>U.tabType(30))},{default:d((()=>[u("仅退款")])),_:1},8,["class"])])),_:1})):n("",!0)])),_:1}),c(I,{class:"group bg-white"},{default:d((()=>[c(I,{class:"group-hd"},{default:d((()=>[c(I,{class:"left"},{default:d((()=>[c(w,{class:"min-name"},{default:d((()=>[u("申请原因")])),_:1})])),_:1})])),_:1}),c(I,{class:"d-s-c"},{default:d((()=>[c(M,{class:"p10 box-s-b border flex-1 f28 lh150",name:"content",placeholder:"请详细填写申请原因，注意保持商品的完好，建议您先与卖家沟通"})])),_:1})])),_:1}),10==x.type||30==x.type?(s(),l(I,{key:0,class:"group bg-white"},{default:d((()=>[c(I,{class:"group-hd"},{default:d((()=>[c(I,{class:"left"},{default:d((()=>[c(w,{class:"min-name"},{default:d((()=>[u("退款金额：")])),_:1}),c(w,{class:"red f30"},{default:d((()=>[u("¥"+i(x.product.total_pay_price),1)])),_:1})])),_:1})])),_:1})])),_:1})):n("",!0),c(I,{class:"group bg-white"},{default:d((()=>[c(I,{class:"group-hd"},{default:d((()=>[c(I,{class:"left"},{default:d((()=>[c(w,{class:"min-name"},{default:d((()=>[u("上传凭证")])),_:1}),c(w,{class:"gray9"},{default:d((()=>[u("(最多6张)")])),_:1})])),_:1})])),_:1}),c(I,{class:"upload-list d-s-c"},{default:d((()=>[(s(!0),f(m,null,_(x.images,((e,t)=>(s(),l(I,{class:"item",key:t,onClick:t=>U.deleteFunc(e)},{default:d((()=>[c(F,{src:e.file_path,mode:"aspectFit"},null,8,["src"])])),_:2},1032,["onClick"])))),128)),x.images.length<6?(s(),l(I,{key:0,class:"item d-c-c d-stretch"},{default:d((()=>[c(I,{class:"upload-btn d-c-c d-c flex-1",onClick:t[3]||(t[3]=e=>U.openUpload())},{default:d((()=>[c(w,{class:"icon iconfont icon-xiangji f34"}),c(w,{class:"gray9"},{default:d((()=>[u("上传图片")])),_:1})])),_:1})])),_:1})):n("",!0)])),_:1})])),_:1}),c(I,{class:"foot-btns"},{default:d((()=>[c(C,{"form-type":"submit",class:"btn-red"},{default:d((()=>[u("确认提交")])),_:1})])),_:1})])),_:1},8,["onSubmit","onReset"]),x.isUpload?(s(),l(j,{key:0,onGetImgs:U.getImgsFunc},null,8,["onGetImgs"])):n("",!0)])),_:1})}]]);export{U as default};
