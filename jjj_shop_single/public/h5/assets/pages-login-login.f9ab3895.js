import{_ as a,z as e,K as t,y as s,L as n,s as i,M as o,A as d,o as r,c,w as l,g as u,b as _,d as f,h as g}from"./index-024cd044.js";const p=a({data:()=>({background:"",listData:[],invitation_id:0}),onLoad(a){this.invitation_id=e("invitation_id")?e("invitation_id"):0},methods:{onNotLogin:function(){t({url:"/pages/index/index"})},getUserInfo:function(){let a=this;wx.getUserProfile({lang:"zh_CN",desc:"用于完善会员资料",success:t=>{if("getUserProfile:ok"!==t.errMsg)return!1;s({title:"正在登录",mask:!0}),n({success(s){a._post("user.user/login",{invitation_id:a.invitation_id,code:s.code,user_info:t.rawData,encrypted_data:encodeURIComponent(t.encryptedData),iv:encodeURIComponent(t.iv),signature:t.signature,referee_id:e("referee_id"),source:"wx"},(a=>{i("token",a.data.token),i("user_id",a.data.user_id),o()}),!1,(()=>{d()}))}})}})}}},[["render",function(a,e,t,s,n,i){const o=u,d=g;return r(),c(o,{class:"login-container"},{default:l((()=>[_(o,{class:"wechatapp"},{default:l((()=>[_(o,{class:"header"})])),_:1}),_(o,{class:"auth-title"},{default:l((()=>[f("申请获取以下权限")])),_:1}),_(o,{class:"auth-subtitle"},{default:l((()=>[f("获得你的公开信息（昵称、头像等）")])),_:1}),_(o,{class:"login-btn"}),_(o,{class:"no-login-btn"},{default:l((()=>[_(d,{class:"btn-normal",onClick:i.onNotLogin},{default:l((()=>[f("暂不登录")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-f7208f67"]]);export{p as default};
