import{E as e,c as s,d as o,e as a,f as t}from"./element-plus-68e4b1c7.js";import{I as r}from"./index-871ac45b.js";import{_ as i,u as l,b as m}from"./index-c1104e7d.js";import{U as n}from"./user-c9f988d4.js";import{c as u,P as p,S as c,V as d,o as g,a as h,X as j,a1 as f,W as b}from"./@vue-76da2f05.js";import"./@vueuse-90d34f35.js";import"./lodash-es-3f297d7c.js";import"./async-validator-cf877c1f.js";import"./dayjs-13b7e569.js";import"./call-bind-6a1b7bd0.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-9f5f6982.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-b6ab34d8.js";import"./pinia-58dabe83.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-74887072.js";import"./side-channel-9348fcaa.js";import"./object-inspect-c71aff05.js";import"./vue-clipboard2-8d1bb64a.js";import"./clipboard-fb55ee1a.js";import"./vue-ueditor-wrap-c9660067.js";const{afterLogin:_}=l(),y={class:"title",style:{"margin-bottom":"20px"}};const k=i({data:()=>({loading:!0,bgimg_url:"",logining:!1,ruleForm:{account:"admin",checkPass:"123456"},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},baseData:{},shop_name:""}),created(){this.getData(),this.$route.query.from&&"admin"==this.$route.query.from&&this.saasLogin()},methods:{getData(){let e=this;r.base(!0).then((s=>{e.loading=!1;const{data:{settings:{shop_bg_img:o,shop_name:a}}}=s;e.shop_name=a,e.bgimg_url=o||m})).catch((s=>{e.loading=!1}))},SubmitFunc(e){var s=this;this.$refs.ruleForm.validate((async e=>{if(e){this.logining=!0;var o={username:this.ruleForm.account,password:this.ruleForm.checkPass};n.login(o,!0).then((async e=>{await _(e),s.logining=!1,s.$router.push({path:"/home"})})).catch((e=>{s.logining=!1}))}}))},saasLogin(){n.saasLogin({},!0).then((s=>{1==s.code?(delCookie("baseInfo"),setCookie("userinfo",s.data),setCookie("isLogin_single",!0),this.$router.push({path:"/"})):e({message:"登录失败",type:"error"})})).catch((e=>{}))}}},[["render",function(e,r,i,l,m,n){const _=o,k=a,v=t,F=s;return g(),u("div",{class:"login-bg",style:d("background-image:url("+m.bgimg_url+");")},[p(F,{model:m.ruleForm,rules:m.rules,ref:"ruleForm","label-position":"left","label-width":"0px",class:"demo-ruleForm login-container"},{default:c((()=>[h("h3",y,j(m.shop_name),1),p(k,{prop:"account"},{default:c((()=>[p(_,{type:"text",modelValue:m.ruleForm.account,"onUpdate:modelValue":r[0]||(r[0]=e=>m.ruleForm.account=e),"auto-complete":"off",placeholder:"账号"},null,8,["modelValue"])])),_:1}),p(k,{prop:"checkPass"},{default:c((()=>[p(_,{type:"password",modelValue:m.ruleForm.checkPass,"onUpdate:modelValue":r[1]||(r[1]=e=>m.ruleForm.checkPass=e),"auto-complete":"off",placeholder:"密码"},null,8,["modelValue"])])),_:1}),p(k,null,{default:c((()=>[p(v,{type:"primary",style:{width:"100%"},onClick:f(n.SubmitFunc,["prevent"]),loading:m.logining},{default:c((()=>[b("登录")])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules"])],4)}],["__scopeId","data-v-9e4da5e4"]]);export{k as default};
