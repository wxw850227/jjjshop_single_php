import{E as e,u as t,w as i,f as s,c as a}from"./element-plus-68e4b1c7.js";import{P as o}from"./product-a5c451ce.js";import r from"./Basic-0e1c286a.js";import n from"./Spec-970d216f.js";import l from"./Content-a5e7bf07.js";import m from"./Buyset-c39dc4dc.js";import{ae as p,o as d,c,P as u,S as _,$ as j,a0 as f,a as g,W as v}from"./@vue-76da2f05.js";import{_ as y}from"./index-d5abae2c.js";import"./@vueuse-90d34f35.js";import"./lodash-es-3f297d7c.js";import"./async-validator-cf877c1f.js";import"./dayjs-13b7e569.js";import"./call-bind-6a1b7bd0.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-9f5f6982.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./Upload-b4b0cf8c.js";import"./AddCategory-f060626c.js";import"./file-c3df6c02.js";/* empty css                                                               */import"./vuedraggable-13be42ee.js";import"./vue-407f4729.js";import"./sortablejs-9c07ead7.js";import"./Single-a0c2abce.js";import"./Many-030d5f9f.js";import"./UE-846e58b5.js";import"./vue-router-b6ab34d8.js";import"./pinia-58dabe83.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-74887072.js";import"./side-channel-9348fcaa.js";import"./object-inspect-c71aff05.js";import"./vue-clipboard2-8d1bb64a.js";import"./clipboard-fb55ee1a.js";import"./vue-ueditor-wrap-c9660067.js";const b={class:"product-add"},h={class:"common-button-wrapper"};const S=y({components:{Basic:r,Spec:n,Content:l,Buyset:m},data:()=>({activeName:"basic",loading:!1,form:{model:{product_name:"",video_id:0,poster_id:0,category_id:null,image:[],is_picture:0,contentImage:[],video:{file_id:0,file_path:""},poster:{file_id:0,file_path:""},selling_point:"",spec_type:10,deduct_stock_type:20,is_alone_grade:0,sku:{},spec_many:{spec_attr:[],spec_list:[]},content:"",delivery_id:"",product_status:10,sales_initial:0,product_sort:100,is_points_gift:1,is_points_discount:1,max_points_discount:0,is_enable_grade:1,alone_grade_type:10,grade_ids:[],is_ind_agent:0,agent_money_type:10,first_money:0,second_money:0,third_money:0,is_virtual:0,limit_num:0,virtual_auto:0,virtual_content:"",table_id:"",is_preview:0,preview_time:""},category:[],delivery:[],gradeList:[],specData:null,isSpecLocked:!1,basicSetting:{},tableList:[]}}),provide:function(){return{form:this.form}},created(){this.getBaseData()},methods:{getBaseData:function(){let e=this;o.getBaseData({},!0).then((t=>{e.loading=!1,Object.assign(e.form,t.data)})).catch((t=>{e.loading=!1}))},convertJson(e){let t={};return e.forEach((e=>{t[e.grade_id]=e.product_equity})),JSON.stringify(t)},onSubmit:function(){let t=this,i=t.form.model;t.$refs.form.validate((s=>{s&&(t.loading=!0,i.alone_grade_equity=t.convertJson(t.form.gradeList),o.addProduct({params:JSON.stringify(i)},!0).then((i=>{t.loading=!1,e({message:"添加成功",type:"success"}),t.$router.push("/product/product/index")})).catch((e=>{t.loading=!1})))}))},cancelFunc(){this.$router.back(-1)}}},[["render",function(e,o,r,n,l,m){const y=t,S=i,N=p("Basic"),k=p("Spec"),w=p("Content"),x=p("Buyset"),B=s,C=a;return d(),c("div",b,[u(S,{modelValue:l.activeName,"onUpdate:modelValue":o[0]||(o[0]=e=>l.activeName=e),type:"card"},{default:_((()=>[u(y,{label:"基础设置",name:"basic"}),u(y,{label:"规格库存",name:"spec"}),u(y,{label:"商品详情",name:"content"}),u(y,{label:"高级设置",name:"buyset"})])),_:1},8,["modelValue"]),u(C,{size:"small",ref:"form",model:l.form,"label-width":"180px"},{default:_((()=>[j(u(N,null,null,512),[[f,"basic"==l.activeName]]),j(u(k,null,null,512),[[f,"spec"==l.activeName]]),j(u(w,null,null,512),[[f,"content"==l.activeName]]),j(u(x,null,null,512),[[f,"buyset"==l.activeName]]),g("div",h,[u(B,{size:"small",type:"info",onClick:m.cancelFunc},{default:_((()=>[v("取消")])),_:1},8,["onClick"]),u(B,{size:"small",type:"primary",onClick:m.onSubmit,loading:l.loading},{default:_((()=>[v("发布")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"])])}],["__scopeId","data-v-ff862f4f"]]);export{S as default};
