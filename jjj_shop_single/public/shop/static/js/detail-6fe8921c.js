import{E as e,h as a,f as s,g as l,e as d,i as r,F as t,q as i,r as o,d as n,c as p,v as u}from"./element-plus-68e4b1c7.js";import{O as _}from"./order-7442ee1f.js";import{_ as m}from"./index-c1104e7d.js";import{ap as c,$ as f,o as y,c as v,a as g,P as b,S as x,W as h,X as j,T as k,Y as V,Q as w,a9 as z}from"./@vue-76da2f05.js";import"./@vueuse-90d34f35.js";import"./lodash-es-3f297d7c.js";import"./async-validator-cf877c1f.js";import"./dayjs-13b7e569.js";import"./call-bind-6a1b7bd0.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-9f5f6982.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-b6ab34d8.js";import"./pinia-58dabe83.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-74887072.js";import"./side-channel-9348fcaa.js";import"./object-inspect-c71aff05.js";import"./vue-clipboard2-8d1bb64a.js";import"./clipboard-fb55ee1a.js";import"./vue-ueditor-wrap-c9660067.js";const U={data:()=>({tableData:{},detail:{is_agree:{},type:{},status:{},order_master:{},user:{},orderproduct:{},express:{},address:{},image:[],is_plate_send:0,sendexpress:{}},expressList:[],order:{},address:{},form:{is_agree:10,address_id:"",refuse_desc:"",refund_money:0},money:{refund_money:0},order_refund_id:0,deliver:{send_express_id:"",send_express_no:""},loading:!0}),created(){this.getData()},methods:{getData(){let e=this,a=this.$route.query.order_refund_id;_.refundDetail({order_refund_id:a},!0).then((a=>{e.detail=a.data.detail,e.order=a.data.order,e.address=a.data.address,e.expressList=a.data.expressList,e.loading=!1})).catch((e=>{}))},gotoPage(e){this.$router.push({path:"/order/order/detail",query:{order_id:e.order_id}})},onSubmit(a){let s=this.form,l=a;_.Approval({is_agree:s.is_agree,address_id:s.address_id,refuse_desc:s.refuse_desc,order_refund_id:l,refund_money:s.refund_money},!0).then((a=>{e({message:"恭喜你，操作成功",type:"success"}),this.getData()})).catch((e=>{}))},refundMoney(a){let s=this,l={},d=s.deliver;""!=d.send_express_id||20!=s.detail.type.value?""!=d.send_express_no||20!=s.detail.type.value?(20==s.detail.type.value&&(l.send_express_id=d.send_express_id,l.send_express_no=d.send_express_no),l.refund_money=s.money.refund_money,l.order_refund_id=a,_.receipt(l,!0).then((a=>{e({message:"恭喜你，操作成功",type:"success"}),this.getData()})).catch((e=>{}))):e.error("请填写物流单号"):e.error("请选择物流公司")},cancelFunc(){this.$router.back(-1)}}},D={class:"user pb50"},q={class:"product-content"},C=g("div",{class:"common-form"},"售后单信息",-1),L={class:"refund-detail-content"},$={class:"pb16"},F=g("span",{class:"gray9"},"订单号：",-1),P={class:"pb16"},S=g("span",{class:"gray9"},"买家：",-1),M={class:"pb16"},A=g("span",{class:"gray9"},"售后类型：",-1),E={class:"pb16"},K=g("span",{class:"gray9"},"处理状态：",-1),N={class:"pb16"},O=g("div",{class:"common-form"},"售后商品信息",-1),Q={class:"refund-detail-content"},R=g("div",{class:"pb16"},[g("span",{class:"gray9"},"商品编码：")],-1),T={class:"pb16"},W=g("span",{class:"gray9"},"商品名称：",-1),X={class:"pb16"},Y=g("span",{class:"gray9"},"重量(Kg)：",-1),B={class:"pb16"},G=g("span",{class:"gray9"},"单价：",-1),H={class:"pb16"},I=g("span",{class:"gray9"},"购买数量：",-1),J={class:"pb16"},Z={key:0,class:"red"},ee={key:1,class:"gray9"},ae={class:"pb16"},se=g("span",{class:"gray9"},"付款价：",-1),le={class:"apply-reason-box"},de=g("div",{class:"common-form"},"用户申请原因",-1),re={class:"apply-reason"},te={key:0,class:"d-s-s mt10"},ie={alt:"",width:"60"},oe={key:0},ne=g("div",{class:"common-form mt16"},"商家审核",-1),pe={class:"orange"},ue={key:1},_e=g("div",{class:"common-form mt16"},"退货地址",-1),me={class:"pb16"},ce=g("span",{class:"gray9"},"收货人：",-1),fe={class:"pb16"},ye=g("span",{class:"gray9"},"收货电话：",-1),ve={class:"pb16"},ge=g("span",{class:"gray9"},"收货地址：",-1),be={key:2},xe=g("div",{class:"common-form"},"商家拒绝原因",-1),he={class:"apply-reason"},je={key:3},ke=g("div",{class:"common-form mt16"},"用户发货信息",-1),Ve={class:"pb16"},we=g("span",{class:"gray9"},"物流公司：",-1),ze={class:"pb16"},Ue=g("span",{class:"gray9"},"物流单号：",-1),De=g("div",{class:"pb16"},[g("span",{class:"gray9"},"用户发货状态："),h(" 已发货 ")],-1),qe={class:"pb16"},Ce=g("span",{class:"gray9"},"发货时间：",-1),Le={class:"pb16"},$e=g("span",{class:"gray9"},"商家收货状态：",-1),Fe={key:4},Pe=g("div",{class:"common-form mt16"},"确认收货并退款",-1),Se=g("p",null,"注：该操作将执行订单原路退款 并关闭当前售后单，请确认并填写退款的金额（不能大于订单实付款）",-1),Me={class:"orange"},Ae={key:5},Ee={key:0},Ke=g("div",{class:"common-form mt16"},"发货",-1),Ne={key:1},Oe=g("div",{class:"common-form mt16"},"平台发货信息",-1),Qe={class:"pb16"},Re=g("span",{class:"gray9"},"物流公司：",-1),Te={class:"pb16"},We=g("span",{class:"gray9"},"物流单号：",-1),Xe={class:"pb16"},Ye=g("span",{class:"gray9"},"发货时间：",-1),Be={class:"common-button-wrapper"};const Ge=m(U,[["render",function(e,_,m,U,Ge,He){const Ie=a,Je=s,Ze=l,ea=d,aa=r,sa=t,la=i,da=o,ra=n,ta=p,ia=c("img-url"),oa=u;return f((y(),v("div",D,[g("div",q,[C,g("div",L,[b(Ze,null,{default:x((()=>[b(Ie,{span:5},{default:x((()=>[g("div",$,[F,h(" "+j(Ge.detail.order_master.order_no),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",P,[S,h(" "+j(Ge.detail.user.nickName),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",M,[A,h(" "+j(Ge.detail.type.text),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",E,[K,h(" "+j(Ge.detail.status.text),1)])])),_:1}),b(Ie,{span:4},{default:x((()=>[g("div",N,[b(Je,{size:"small",href:"/",target:"_blank",onClick:_[0]||(_[0]=e=>He.gotoPage(Ge.detail))},{default:x((()=>[h("订单详情")])),_:1})])])),_:1})])),_:1})]),O,g("div",Q,[b(Ze,null,{default:x((()=>[b(Ie,{span:5},{default:x((()=>[R])),_:1}),b(Ie,{span:19},{default:x((()=>[g("div",T,[W,h(" "+j(Ge.detail.orderproduct.product_name),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",X,[Y,h(" "+j(Ge.detail.orderproduct.product_weight),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",B,[G,h(" "+j(Ge.detail.orderproduct.line_price),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",H,[I,h(" "+j(Ge.detail.orderproduct.total_num),1)])])),_:1}),80==Ge.order.order_source?(y(),k(Ie,{key:0,span:5},{default:x((()=>[g("div",J,[1==Ge.order.advance.money_return?(y(),v("span",Z,"定金(可退)：")):(y(),v("span",ee,"定金(不可退)：")),h(" "+j(Ge.order.advance.pay_price),1)])])),_:1})):V("",!0),b(Ie,{span:5},{default:x((()=>[g("div",ae,[se,h(" "+j(Ge.detail.orderproduct.total_pay_price),1)])])),_:1})])),_:1})]),g("div",le,[de,g("div",re,j(Ge.detail.apply_desc),1),Ge.detail.image.length>0?(y(),v("div",te,[(y(!0),v(w,null,z(Ge.detail.image,((e,a)=>(y(),v("div",{class:"pic",key:a},[f(g("img",ie,null,512),[[ia,e.file_path]])])))),128))])):V("",!0)]),0==Ge.detail.is_agree.value?(y(),v("div",oe,[ne,b(ta,{size:"small",ref:"form",model:Ge.form,"label-width":"80px"},{default:x((()=>[b(ea,{label:"售后类型"},{default:x((()=>[g("span",pe,j(Ge.detail.type.text),1)])),_:1}),b(ea,{label:"审核状态"},{default:x((()=>[b(sa,{modelValue:Ge.form.is_agree,"onUpdate:modelValue":_[1]||(_[1]=e=>Ge.form.is_agree=e)},{default:x((()=>[b(aa,{label:10},{default:x((()=>[h("同意")])),_:1}),b(aa,{label:20},{default:x((()=>[h("拒绝")])),_:1})])),_:1},8,["modelValue"])])),_:1}),10==Ge.form.is_agree&&30!=Ge.detail.type.value?(y(),k(ea,{key:0,label:"退货地址"},{default:x((()=>[b(da,{modelValue:Ge.form.address_id,"onUpdate:modelValue":_[2]||(_[2]=e=>Ge.form.address_id=e),placeholder:"请选择地址"},{default:x((()=>[(y(!0),v(w,null,z(Ge.address,((e,a)=>(y(),k(la,{key:a,label:e.detail,value:e.address_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):V("",!0),10==Ge.form.is_agree&&30==Ge.detail.type.value?(y(),k(ea,{key:1,label:"退款金额"},{default:x((()=>[b(ra,{modelValue:Ge.form.refund_money,"onUpdate:modelValue":_[3]||(_[3]=e=>Ge.form.refund_money=e)},null,8,["modelValue"]),g("p",null,"请输入退款金额，最多"+j(Ge.detail.orderproduct.max_refund_money)+" 元。注：该操作将执行订单原路退款 并关闭当前售后单，请确认并填写退款的金额（不能大于订单实付款）",1)])),_:1})):V("",!0),20==Ge.form.is_agree?(y(),k(ea,{key:2,label:"拒绝原因"},{default:x((()=>[b(ra,{type:"textarea",modelValue:Ge.form.refuse_desc,"onUpdate:modelValue":_[4]||(_[4]=e=>Ge.form.refuse_desc=e),class:"max-w460"},null,8,["modelValue"])])),_:1})):V("",!0)])),_:1},8,["model"])])):V("",!0),10==Ge.detail.is_agree.value&&30!=Ge.detail.type.value?(y(),v("div",ue,[_e,b(Ze,null,{default:x((()=>[b(Ie,{span:5},{default:x((()=>[g("div",me,[ce,h(" "+j(Ge.detail.address.name),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",fe,[ye,h(" "+j(Ge.detail.address.phone),1)])])),_:1}),b(Ie,{span:14},{default:x((()=>[g("div",ve,[ge,h(" "+j(Ge.detail.address.detail),1)])])),_:1})])),_:1})])):V("",!0),20==Ge.detail.is_agree.value?(y(),v("div",be,[xe,g("div",he,j(Ge.detail.refuse_desc),1)])):V("",!0),30!=Ge.detail.type.value&&10==Ge.detail.is_agree.value&&1==Ge.detail.is_user_send?(y(),v("div",je,[ke,b(Ze,null,{default:x((()=>[b(Ie,{span:5},{default:x((()=>[g("div",Ve,[we,h(" "+j(Ge.detail.express.express_name),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",ze,[Ue,h(" "+j(Ge.detail.express_no),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[De])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",qe,[Ce,h(" "+j(Ge.detail.send_time),1)])])),_:1}),b(Ie,{span:4},{default:x((()=>[g("div",Le,[$e,1==Ge.detail.is_receipt?(y(),v(w,{key:0},[h(" 已收货 ")],64)):(y(),v(w,{key:1},[h(" 待收货 ")],64))])])),_:1})])),_:1})])):V("",!0),10==Ge.detail.type.value&&10==Ge.detail.is_agree.value&&1==Ge.detail.is_user_send&&0==Ge.detail.is_receipt?(y(),v("div",Fe,[Pe,b(ta,{size:"small",ref:"money",model:Ge.money,"label-width":"80px"},{default:x((()=>[Se,b(ea,{label:"售后类型"},{default:x((()=>[g("span",Me,j(Ge.detail.type.text),1)])),_:1}),b(ea,{label:"退款金额"},{default:x((()=>[b(ra,{modelValue:Ge.money.refund_money,"onUpdate:modelValue":_[5]||(_[5]=e=>Ge.money.refund_money=e)},null,8,["modelValue"]),g("p",null,"请输入退款金额，最多"+j(Ge.detail.orderproduct.max_refund_money)+" 元",1)])),_:1})])),_:1},8,["model"])])):V("",!0),20==Ge.detail.type.value&&10==Ge.detail.is_agree.value&&1==Ge.detail.is_user_send?(y(),v("div",Ae,[0==Ge.detail.is_plate_send?(y(),v("div",Ee,[Ke,b(ta,{size:"small",ref:"deliver",model:Ge.deliver,"label-width":"100px"},{default:x((()=>[b(ea,{label:"物流公司"},{default:x((()=>[b(da,{modelValue:Ge.deliver.send_express_id,"onUpdate:modelValue":_[6]||(_[6]=e=>Ge.deliver.send_express_id=e),placeholder:"请选择快递公司"},{default:x((()=>[(y(!0),v(w,null,z(Ge.expressList,((e,a)=>(y(),k(la,{label:e.express_name,key:a,value:e.express_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(ea,{label:"物流单号"},{default:x((()=>[b(ra,{modelValue:Ge.deliver.send_express_no,"onUpdate:modelValue":_[7]||(_[7]=e=>Ge.deliver.send_express_no=e),class:"max-w460"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])):V("",!0),1==Ge.detail.is_plate_send?(y(),v("div",Ne,[Oe,b(Ze,null,{default:x((()=>[b(Ie,{span:5},{default:x((()=>[g("div",Qe,[Re,h(" "+j(Ge.detail.sendexpress.express_name),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",Te,[We,h(" "+j(Ge.detail.send_express_no),1)])])),_:1}),b(Ie,{span:5},{default:x((()=>[g("div",Xe,[Ye,h(" "+j(Ge.detail.deliver_time),1)])])),_:1})])),_:1})])):V("",!0)])):V("",!0)]),g("div",Be,[b(Je,{size:"small",type:"info",onClick:He.cancelFunc},{default:x((()=>[h("取消 / 返回上一页")])),_:1},8,["onClick"]),0==Ge.detail.is_agree.value?(y(),k(Je,{key:0,size:"small",type:"primary",onClick:_[8]||(_[8]=e=>He.onSubmit(Ge.detail.order_refund_id))},{default:x((()=>[h("确认审核")])),_:1})):V("",!0),30!=Ge.detail.type.value&&10==Ge.detail.is_agree.value&&1==Ge.detail.is_user_send&&0==Ge.detail.is_receipt?(y(),k(Je,{key:1,size:"small",type:"primary",onClick:_[9]||(_[9]=e=>He.refundMoney(Ge.detail.order_refund_id))},{default:x((()=>[h("确认审核")])),_:1})):V("",!0)])])),[[oa,Ge.loading]])}]]);export{Ge as default};
