System.register(["./Product-legacy-464d0c86.js","./element-plus-legacy-cd39421e.js","./index-legacy-4f532ec6.js","./@vue-legacy-3fcc10b7.js","./product-legacy-c9834749.js","./@vueuse-legacy-bdd63cbd.js","./lodash-es-legacy-7c31c52b.js","./async-validator-legacy-aa1fd2de.js","./dayjs-legacy-b61d7302.js","./call-bind-legacy-93acd607.js","./get-intrinsic-legacy-4f34f38e.js","./has-symbols-legacy-afcc0593.js","./has-proto-legacy-d280ab1e.js","./function-bind-legacy-b76e1749.js","./has-legacy-06d86c07.js","./@element-plus-legacy-053c792c.js","./escape-html-legacy-ae962a8c.js","./normalize-wheel-es-legacy-13d39621.js","./@ctrl-legacy-33dbca08.js","./vue-router-legacy-51ef7ec5.js","./pinia-legacy-9b6e299c.js","./vue-demi-legacy-97cfbb01.js","./axios-legacy-40880ebd.js","./qs-legacy-bbbea217.js","./side-channel-legacy-25200cf8.js","./object-inspect-legacy-b217d60b.js","./vue-clipboard2-legacy-3536b1d9.js","./clipboard-legacy-531f08f2.js","./vue-ueditor-wrap-legacy-8e203191.js"],(function(e,l){"use strict";var n,a,t,o,u,r,c,i,d,s,m,f,p,g,_,y,h,b,v,j,V,k,w,D,x,C,z,U,P;return{setters:[function(e){n=e._},function(e){a=e.E,t=e.i,o=e.F,u=e.e,r=e.d,c=e.j,i=e.k,d=e.q,s=e.r,m=e.f,f=e.l,p=e.m,g=e.c},function(e){_=e.r,y=e._},function(e){h=e.ap,b=e.o,v=e.c,j=e.P,V=e.S,k=e.W,w=e.Q,D=e.a9,x=e.T,C=e.X,z=e.Y,U=e.a,P=e.$},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=function(e,l){return _._get("/shop/plus.recommend/index",e,l)},I=function(e,l){return _._post("/shop/plus.recommend/index",e,l)},q={components:{Product:n},data:function(){return{form:{is_recommend:0,choice:0,location:[],name:""},all_type:[{name:"购物车",value:10},{name:"会员中心",value:20},{name:"支付完成页",value:30}],showType:[{name:"根据销量降序展示",value:10},{name:"根据添加商品时间降序展示",value:20},{name:"根据人气降序展示",value:30}],showNum:[{name:"显示当前20个",value:20},{name:"显示当前30个",value:30},{name:"显示当前50个",value:50}],type:10,num:20,tableData:[],product_arr:[],isproduct:!1,Data:[],loading:!1}},created:function(){this.getData()},methods:{getData:function(){var e=this;l({},!0).then((function(l){e.loading=!1,e.form=l.data.vars.values;for(var n=0;n<e.form.location.length;n++)e.form.location[n]=parseInt(e.form.location[n]);1==e.form.choice?(e.product_arr=l.data.product_arr,e.tableData=e.form.product):(e.type=parseInt(e.form.type),e.num=parseInt(e.form.num)),e.form.is_recommend=parseInt(e.form.is_recommend),e.form.choice=parseInt(e.form.choice)})).catch((function(l){e.loading=!1}))},onSubmit:function(){var e=this,l=e.form;if(1==l.choice?l.product=e.tableData:(l.type=e.type,l.num=e.num),!e.checkData(l))return!1;e.loading=!0,I(l,!0).then((function(l){e.loading=!1,1==l.code?(a({message:"恭喜你，保存成功",type:"success"}),e.getData()):e.loading=!1})).catch((function(l){e.loading=!1}))},closeProductDialogFunc:function(e){if(this.isproduct=e.openDialog,"success"==e.type){if(this.product_arr.indexOf(e.params.product_id)>-1)return a({message:"你已选中该产品",type:"error"}),!1;var l={};l.product_id=e.params.product_id,l.product_name=e.params.product_name,l.product_image=e.params.product_image,l.sort=1,this.tableData.push(l),this.product_arr.push(e.params.product_id)}},addClick:function(){this.isproduct=!0},deleteClick:function(e){var l=this.product_arr.indexOf(e.product_id);this.product_arr.splice(l,1),this.tableData.splice(l,1)},checkData:function(e){return!!e.name&&(0==e.location.length?(a({message:"请选择展示位置",type:"error"}),!1):1!=e.choice||0!=e.product.length||(a({message:"请添加商品",type:"error"}),!1))}}},S={class:"product-add"},F=U("div",{class:"common-form"},"商品推荐",-1),T={class:"common-level-rail"},N={class:"pb50"},O={class:"product-info"},E={class:"pic"},M={width:30,height:30},Q={class:"common-button-wrapper"};e("default",y(q,[["render",function(e,l,a,_,y,I){var q=t,W=o,X=u,Y=r,$=c,A=i,B=d,G=s,H=m,J=f,K=p,L=g,R=n,Z=h("img-url");return b(),v("div",S,[j(L,{size:"small",ref:"form",model:y.form,"label-width":"100px"},{default:V((function(){return[F,j(X,{label:"商品推荐"},{default:V((function(){return[j(W,{modelValue:y.form.is_recommend,"onUpdate:modelValue":l[0]||(l[0]=function(e){return y.form.is_recommend=e})},{default:V((function(){return[j(q,{label:0},{default:V((function(){return[k("关")]})),_:1}),j(q,{label:1},{default:V((function(){return[k("开")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),j(X,{label:"模块名称",rules:[{required:!0,message:" "}],prop:"name"},{default:V((function(){return[j(Y,{modelValue:y.form.name,"onUpdate:modelValue":l[1]||(l[1]=function(e){return y.form.name=e}),placeholder:"请输入模块名称",class:"max-w460",disabled:0==y.form.is_recommend},null,8,["modelValue","disabled"])]})),_:1}),j(X,{label:"展示位置"},{default:V((function(){return[j(A,{modelValue:y.form.location,"onUpdate:modelValue":l[2]||(l[2]=function(e){return y.form.location=e})},{default:V((function(){return[(b(!0),v(w,null,D(y.all_type,(function(e,l){return b(),x($,{label:e.value,key:l,disabled:0==y.form.is_recommend},{default:V((function(){return[k(C(e.name),1)]})),_:2},1032,["label","disabled"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),j(X,{label:"推荐商品"},{default:V((function(){return[j(W,{modelValue:y.form.choice,"onUpdate:modelValue":l[3]||(l[3]=function(e){return y.form.choice=e})},{default:V((function(){return[j(q,{label:0,disabled:0==y.form.is_recommend},{default:V((function(){return[k("按条件选择")]})),_:1},8,["disabled"]),j(q,{label:1,disabled:0==y.form.is_recommend},{default:V((function(){return[k("自定义选择")]})),_:1},8,["disabled"])]})),_:1},8,["modelValue"])]})),_:1}),0==y.form.choice?(b(),x(X,{key:0,label:""},{default:V((function(){return[j(G,{modelValue:y.type,"onUpdate:modelValue":l[4]||(l[4]=function(e){return y.type=e}),placeholder:"",disabled:0==y.form.is_recommend},{default:V((function(){return[(b(!0),v(w,null,D(y.showType,(function(e,l){return b(),x(B,{label:e.name,value:e.value,key:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1})):z("",!0),0==y.form.choice?(b(),x(X,{key:1,label:""},{default:V((function(){return[j(G,{modelValue:y.num,"onUpdate:modelValue":l[5]||(l[5]=function(e){return y.num=e}),placeholder:"",disabled:0==y.form.is_recommend},{default:V((function(){return[(b(!0),v(w,null,D(y.showNum,(function(e,l){return b(),x(B,{label:e.name,value:e.value,key:l},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1})):z("",!0),1==y.form.choice?(b(),x(X,{key:2,size:"small",label:""},{default:V((function(){return[U("div",T,[j(H,{size:"small",icon:"Plus",onClick:I.addClick},{default:V((function(){return[k("添加商品")]})),_:1},8,["onClick"])]),U("div",N,[j(K,{size:"small",data:y.tableData,border:""},{default:V((function(){return[j(J,{label:"图片",width:"60"},{default:V((function(e){return[U("div",O,[U("div",E,[P(U("img",M,null,512),[[Z,e.row.product_image]])])])]})),_:1}),j(J,{prop:"product_name",label:"商品"}),j(J,{label:"排序",width:"100"},{default:V((function(e){return[j(Y,{modelValue:e.row.sort,"onUpdate:modelValue":function(l){return e.row.sort=l},type:"number",disabled:0==y.form.is_recommend},null,8,["modelValue","onUpdate:modelValue","disabled"])]})),_:1}),j(J,{fixed:"right",label:"操作",width:"110"},{default:V((function(e){return[j(H,{onClick:function(l){return I.deleteClick(e.row)},type:"text",size:"small",disabled:0==y.form.is_recommend},{default:V((function(){return[k("删除")]})),_:2},1032,["onClick","disabled"])]})),_:1})]})),_:1},8,["data"])])]})),_:1})):z("",!0),U("div",Q,[j(H,{type:"primary",size:"small",onClick:I.onSubmit,loading:y.loading},{default:V((function(){return[k("提交")]})),_:1},8,["onClick","loading"])])]})),_:1},8,["model"]),j(R,{isproduct:y.isproduct,onCloseDialog:l[6]||(l[6]=function(e){return I.closeProductDialogFunc(e)})},{default:V((function(){return[k("产品列表弹出层")]})),_:1},8,["isproduct"])])}]]))}}}));
