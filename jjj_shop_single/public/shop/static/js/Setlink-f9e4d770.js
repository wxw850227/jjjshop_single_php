import{q as e,r as a,v as t,d as l,e as n,c as i,u as s,w as o,y as c,f as d,l as u,m as r,n as g,o as p}from"./element-plus-68e4b1c7.js";import{_ as m,r as h}from"./index-d5abae2c.js";import{o as v,T as y,S as b,c as f,Q as _,a9 as D,$ as C,P as V,a as k,ap as F,Y as P,W as w,X as x,ae as S}from"./@vue-76da2f05.js";import{_ as z}from"./Article-6004f402.js";import{P as L}from"./product-a5c451ce.js";const T=m({data:()=>({pages:[{url:"/pages/user/address/address",name:"收货地址",type:"菜单"},{url:"/pages/coupon/coupon",name:"领券中心",type:"菜单"},{url:"/pages/user/my-coupon/my-coupon",name:"我的优惠券",type:"菜单"},{url:"/pages/user/my_attention/my_attention",name:"我的收藏",type:"菜单"},{url:"/pages/plus/signin/signin",name:"签到有礼",type:"菜单"},{url:"/pages/user/evaluate/list",name:"我的评价",type:"菜单"},{url:"/pages/user/set/set",name:"设置",type:"菜单"},{url:"scanQrcode",name:"扫一扫",type:"菜单"}],activePage:"收货地址"}),created(){this.changeFunc(this.pages[0])},methods:{changeFunc(e){this.$emit("changeData",e)}}},[["render",function(t,l,n,i,s,o){const c=e,d=a;return v(),y(d,{modelValue:s.activePage,"onUpdate:modelValue":l[0]||(l[0]=e=>s.activePage=e),placeholder:"请选择",class:"percent-w100",onChange:o.changeFunc,"value-key":"url"},{default:b((()=>[(v(!0),f(_,null,D(s.pages,(e=>(v(),y(c,{key:e.url,"value-key":e.name,label:e.name,value:e},null,8,["value-key","label","value"])))),128))])),_:1},8,["modelValue","onChange"])}]]);let N={getList:(e,a)=>h._post("/shop/data.link/index",e,a),getPageList:(e,a)=>h._post("/shop/data.link/getPageList",e,a)};const U=m({data:()=>({loading:!0,pages:[],activePage:{}}),created(){this.getData()},methods:{getData(){let e=this;N.getPageList({},!0).then((a=>{e.loading=!1;let t=[];for(let e=0,l=a.data.list.length;e<l;e++){let l=a.data.list[e],n={url:"pages/diy-page/diy-page?page_id="+l.page_id,name:l.page_name,type:"自定义页面"};t.push(n)}e.pages=t,e.pages.length>0&&(e.activePage=e.pages[0],e.changeFunc(e.activePage))})).catch((a=>{e.loading=!1}))},changeFunc(e){this.$emit("changeData",e)}}},[["render",function(l,n,i,s,o,c){const d=e,u=a,r=t;return C((v(),y(u,{modelValue:o.activePage,"onUpdate:modelValue":n[0]||(n[0]=e=>o.activePage=e),placeholder:"请选择",class:"percent-w100",onChange:c.changeFunc,"value-key":"url"},{default:b((()=>[(v(!0),f(_,null,D(o.pages,(e=>(v(),y(d,{key:e.url,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])),[[r,o.loading]])}]]),$={data:()=>({formmodel:{}}),created(){this.changeFunc("")},methods:{changeFunc(e){let a={name:"https://"+e,url:"pages/webview/webview?url=https://"+e,type:"H5"};this.$emit("changeData",a)}}},A=k("p",null,"注意一：链接的网页必须支持SSL ，链接必须以 https:// 开头，否则无法跳转",-1),j=k("p",null,"注意二：链接的域名必须是备案域名，否则无法跳转",-1),H=k("p",null,"注意三：您的网站域名必须加到微信小程序公众平台的业务域名处,详细说明？",-1);const I=m($,[["render",function(e,a,t,s,o,c){const d=l,u=n,r=i;return v(),y(r,{"label-width":"80px",model:o.formmodel},{default:b((()=>[V(u,{label:"https://"},{default:b((()=>[V(d,{modelValue:o.formmodel.name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formmodel.name=e),onInput:c.changeFunc},null,8,["modelValue","onInput"])])),_:1}),V(u,{label:""},{default:b((()=>[A,j,H])),_:1})])),_:1},8,["model"])}]]),M={class:"marketing-box"};const O=m({data:()=>({activeTab:"signin",pages:[],activePage:null,signinList:[{id:0,url:"pages/plus/signin/signin",name:"签到",type:"营销"}],couponList:[{id:0,url:"pages/coupon/coupon",name:"优惠券",type:"营销"}]}),watch:{activeTab:function(e,a){let t=this;t.pages=[],e!=a&&("signin"==e?t.pages=t.signinList:"coupon"==e&&(t.pages=t.couponList),t.autoSend())}},created(){this.pages=this.signinList,this.autoSend()},methods:{autoSend(){this.pages.length>0&&(this.activePage=this.pages[0],this.changeFunc())},changeFunc(e){this.$emit("changeData",this.activePage)}}},[["render",function(t,l,n,i,c,d){const u=s,r=o,g=e,p=a;return v(),f("div",M,[V(r,{modelValue:c.activeTab,"onUpdate:modelValue":l[0]||(l[0]=e=>c.activeTab=e)},{default:b((()=>[V(u,{label:"签到",name:"signin"}),V(u,{label:"优惠券",name:"coupon"})])),_:1},8,["modelValue"]),V(p,{modelValue:c.activePage,"onUpdate:modelValue":l[1]||(l[1]=e=>c.activePage=e),placeholder:"请选择",class:"percent-w100",onChange:d.changeFunc,"value-key":"id"},{default:b((()=>[(v(!0),f(_,null,D(c.pages,((e,a)=>(v(),y(g,{key:a,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])}]]);const Q=m({data:()=>({pages:[{url:"pages/index/index",name:"首页",type:"页面"},{url:"pages/product/category",name:"分类",type:"页面"},{url:"pages/article/list/list",name:"文章首页",type:"页面"},{url:"pages/cart/cart",name:"购物车",type:"页面"},{url:"pages/order/myorder",name:"订单",type:"页面"},{url:"pages/user/index/index",name:"我的",type:"页面"}],activePage:"首页"}),created(){this.changeFunc(this.pages[0])},methods:{changeFunc(e){this.$emit("changeData",e)}}},[["render",function(t,l,n,i,s,o){const c=e,d=a;return v(),y(d,{modelValue:s.activePage,"onUpdate:modelValue":l[0]||(l[0]=e=>s.activePage=e),placeholder:"请选择",class:"percent-w100",onChange:o.changeFunc,"value-key":"url"},{default:b((()=>[(v(!0),f(_,null,D(s.pages,(e=>(v(),y(c,{key:e.url,"value-key":e.name,label:e.name,value:e},null,8,["value-key","label","value"])))),128))])),_:1},8,["modelValue","onChange"])}]]),q={class:"marketing-box"},K={key:0,class:"product"},W={class:"product-content"},X={class:"table-wrap type-table"},Y={key:1,class:"product-list"},B={class:"common-seach-wrap"},E={class:"product-content"},G={class:"table-wrap setlink-product-table"},J={class:"product-info"},R={class:"pic"},Z={alt:""},ee={class:"info"},ae={class:"name text-ellipsis"},te={class:"red"},le={class:"pagination"};const ne=m({data:()=>({loading:!0,activeTab:"type",categoryList:[],categoryActive:[],searchForm:{product_name:""},tableData:[],pageSize:5,totalDataNumber:0,curPage:1,activePage:null}),created(){this.getCategory()},watch:{activeTab:function(e,a){e!=a&&(this.tableData=[],"type"==e&&this.autoType(),"detail"==e&&this.getData())}},methods:{getCategory(){let e=this;e.loading=!0,L.catList({},!0).then((a=>{e.categoryList=a.data.list,e.autoType(),e.loading=!1})).catch((a=>{e.loading=!1}))},autoType(e){if(e|=0,this.categoryActive=[],this.categoryList.length>0){let a=this.categoryList[e];this.categoryActive.push(a.category_id),a.child&&void 0!==a.child&&a.child.length>0?(this.categoryActive.push(a.child[0].category_id),this.changeFunc(a.child[0])):(e++,this.autoType(e))}},changeCategory(e){let a=this.$refs.cascader.getCheckedNodes();this.changeFunc(a[0].data)},handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.pageSize=e,this.curPage=0,this.getData()},getData(){let e=this;e.loading=!0;let a={};a.page=e.curPage,a.list_rows=e.pageSize,a.product_name=e.searchForm.product_name,L.productList(a,!0).then((a=>{e.loading=!1,e.tableData=a.data.list.data,e.totalDataNumber=a.data.list.total,1==e.curPage&&e.tableData.length>0&&e.changeFunc(e.tableData[0])})).catch((a=>{e.loading=!1}))},onSubmit(){this.curPage=0,this.getData()},changeFunc(e){let a={};"type"==this.activeTab&&(a.name=e.name,a.url="pages/product/list/list?category_id="+e.category_id,a.type="商品分类"),"detail"==this.activeTab&&(a.name=e.product_name,a.url="pages/product/detail/detail?product_id="+e.product_id,a.type="商品详情"),this.$emit("changeData",a)}}},[["render",function(e,a,p,m,h,y){const _=s,D=o,S=c,z=l,L=n,T=d,N=i,U=u,$=r,A=g,j=t,H=F("img-url");return v(),f("div",q,[V(D,{modelValue:h.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>h.activeTab=e)},{default:b((()=>[V(_,{label:"分类",name:"type"}),V(_,{label:"详情",name:"detail"})])),_:1},8,["modelValue"]),"type"==h.activeTab?(v(),f("div",K,[C((v(),f("div",W,[k("div",X,[V(S,{class:"ww100",ref:"cascader",modelValue:h.categoryActive,"onUpdate:modelValue":a[1]||(a[1]=e=>h.categoryActive=e),options:h.categoryList,props:{children:"child",value:"category_id",label:"name"},onChange:y.changeCategory},null,8,["modelValue","options","onChange"])])])),[[j,h.loading]])])):P("",!0),"detail"==h.activeTab?C((v(),f("div",Y,[k("div",B,[V(N,{size:"small",inline:!0,model:h.searchForm,class:"demo-form-inline"},{default:b((()=>[V(L,{label:"商品名称"},{default:b((()=>[V(z,{size:"small",modelValue:h.searchForm.product_name,"onUpdate:modelValue":a[2]||(a[2]=e=>h.searchForm.product_name=e),placeholder:"请输入商品名称"},null,8,["modelValue"])])),_:1}),V(L,null,{default:b((()=>[V(T,{size:"small",icon:"Search",onClick:y.onSubmit},{default:b((()=>[w("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),k("div",E,[k("div",G,[V($,{size:"small",data:h.tableData,border:"",style:{width:"100%"}},{default:b((()=>[V(U,{prop:"product_name",label:"产品"},{default:b((e=>[k("div",J,[k("div",R,[C(k("img",Z,null,512),[[H,e.row.image[0].file_path]])]),k("div",ee,[k("div",ae,x(e.row.product_name),1)])])])),_:1}),V(U,{prop:"product_price",label:"价格",width:"100"},{default:b((e=>[k("span",te,x(e.row.product_price),1)])),_:1}),V(U,{label:"操作",width:"80"},{default:b((e=>[V(T,{size:"small",onClick:a=>y.changeFunc(e.row)},{default:b((()=>[w("选择")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])]),k("div",le,[V(A,{onSizeChange:y.handleSizeChange,onCurrentChange:y.handleCurrentChange,background:"","current-page":h.curPage,"page-size":h.pageSize,layout:"total, prev, pager, next, jumper",total:h.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])),[[j,h.loading]]):P("",!0)])}],["__scopeId","data-v-d4e513fe"]]),ie={data:()=>({formmodel:{}}),methods:{changeFunc(e){this.$emit("changeData",e)}}},se=k("p",null,"注意一：同一个小程序链接其他小程序，最多只能链接10个，超过将不生效",-1),oe=k("p",null,"注意二：不能填写自身小程序appid",-1),ce=k("p",null,"注意三：小程序链接留空默认跳到小程序首页",-1);const de=m(ie,[["render",function(e,a,t,s,o,c){const d=l,u=n,r=i;return v(),y(r,{"label-width":"80px",model:o.formmodel},{default:b((()=>[V(u,{label:"appid "},{default:b((()=>[V(d,{modelValue:o.formmodel.name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formmodel.name=e)},null,8,["modelValue"])])),_:1}),V(u,{label:"页面路径 "},{default:b((()=>[V(d,{modelValue:o.formmodel.name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formmodel.name=e)},null,8,["modelValue"])])),_:1}),V(u,{label:""},{default:b((()=>[se,oe,ce])),_:1})])),_:1},8,["model"])}]]),ue={components:{Pages:Q,Marketing:O,ProductIndex:ne,Article:z,SmallProgram:de,H5:I,DiyPage:U,Menu:T},data:()=>({dialogVisible:!0,activeData:null,activeName:"pages"}),props:["is_linkset"],created(){this.dialogVisible=this.is_linkset},methods:{dialogFormVisible(e){e?(-1!=this.activeData.url.indexOf("giftpackage")&&(this.activeData.name="礼包购-"+this.activeData.name),-1!=this.activeData.url.indexOf("invite")&&(this.activeData.name="邀请有礼-"+this.activeData.name),this.$emit("closeDialog",this.activeData)):this.$emit("closeDialog",null)},activeDataFunc(e){this.activeData=e}}},re={class:"dialog-footer d-b-c"},ge={class:"flex-1"},pe={key:0,class:"d-s-s d-c tl"},me={class:"text-ellipsis setlink-set-link"},he=k("span",null,"当前链接：",-1),ve={class:"gray9"},ye=k("span",{class:"p-0-10 gray"},"/",-1),be={class:"blue"},fe={class:"text-ellipsis gray",style:{"font-size":"10px"}},_e={key:1,class:"tl"},De={class:"setlink-footer-btn"};const Ce=m(ue,[["render",function(e,a,t,l,n,i){const c=Q,u=s,r=O,g=S("ProductIndex"),m=z,h=I,_=U,D=T,C=o,F=d,L=p;return v(),y(L,{title:"超链接设置",modelValue:n.dialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>n.dialogVisible=e),onClose:i.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"800px"},{footer:b((()=>[k("div",re,[k("div",ge,[null!=n.activeData?(v(),f("div",pe,[k("p",me,[he,k("span",ve,x(n.activeData.type),1),ye,k("span",be,x(n.activeData.name),1)]),k("p",fe,x(n.activeData.url),1)])):(v(),f("div",_e," 暂无 "))]),k("div",De,[V(F,{size:"small",onClick:a[1]||(a[1]=e=>i.dialogFormVisible(!1))},{default:b((()=>[w("取 消")])),_:1}),V(F,{size:"small",type:"primary",onClick:a[2]||(a[2]=e=>i.dialogFormVisible(!0))},{default:b((()=>[w("确 定")])),_:1})])])])),default:b((()=>[V(C,{type:"border-card",modelValue:n.activeName,"onUpdate:modelValue":a[0]||(a[0]=e=>n.activeName=e)},{default:b((()=>[V(u,{label:"页面",name:"pages"},{default:b((()=>["pages"==n.activeName?(v(),y(c,{key:0,onChangeData:i.activeDataFunc},null,8,["onChangeData"])):P("",!0)])),_:1}),V(u,{label:"营销",name:"market"},{default:b((()=>["market"==n.activeName?(v(),y(r,{key:0,onChangeData:i.activeDataFunc},null,8,["onChangeData"])):P("",!0)])),_:1}),V(u,{label:"产品",name:"product"},{default:b((()=>["product"==n.activeName?(v(),y(g,{key:0,onChangeData:i.activeDataFunc},null,8,["onChangeData"])):P("",!0)])),_:1}),V(u,{label:"文章",name:"Article"},{default:b((()=>["Article"==n.activeName?(v(),y(m,{key:0,onChangeData:i.activeDataFunc},null,8,["onChangeData"])):P("",!0)])),_:1}),V(u,{label:"H5",name:"H5"},{default:b((()=>["H5"==n.activeName?(v(),y(h,{key:0,onChangeData:i.activeDataFunc},null,8,["onChangeData"])):P("",!0)])),_:1}),V(u,{label:"自定义",name:"diypage"},{default:b((()=>["diypage"==n.activeName?(v(),y(_,{key:0,onChangeData:i.activeDataFunc},null,8,["onChangeData"])):P("",!0)])),_:1}),V(u,{label:"我的菜单",name:"menu"},{default:b((()=>["menu"==n.activeName?(v(),y(D,{key:0,onChangeData:i.activeDataFunc},null,8,["onChangeData"])):P("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue","onClose"])}]]);export{I as H,O as M,ne as P,de as S,Ce as _,Q as a,U as b};
